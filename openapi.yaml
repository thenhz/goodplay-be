openapi: 3.1.0
info:
  title: GoodPlay Backend API
  description: |
    REST API backend for GoodPlay application with JWT authentication and MongoDB.

    ## Authentication
    - Uses JWT Bearer tokens for authentication
    - Access tokens expire in 1 hour (configurable)
    - Refresh tokens expire in 30 days (configurable)

    ## Response Format
    All responses follow this structure:
    ```json
    {
      "success": boolean,
      "message": "CONSTANT_KEY",
      "data": {} // optional
    }
    ```

    ## Message Constants for UI Localization
    All API responses use constant message keys instead of dynamic text.
    The UI localizes these constants to the user's language.
    Each endpoint documents all possible response messages with examples.

    ### Authentication Module Constants:
    - `USER_REGISTRATION_SUCCESS` - User registration success
    - `USER_LOGIN_SUCCESS` - User login success
    - `USER_LOGOUT_SUCCESS` - User logout success
    - `TOKEN_REFRESH_SUCCESS` - Token refresh success
    - `PROFILE_RETRIEVED_SUCCESS` - Profile retrieved success
    - `PROFILE_UPDATED_SUCCESS` - Profile updated success
    - `EMAIL_ALREADY_REGISTERED` - Email already registered
    - `INVALID_EMAIL_FORMAT` - Invalid email format
    - `PASSWORD_TOO_WEAK` - Password must be at least 6 characters
    - `CREDENTIALS_REQUIRED` - Email and password required
    - `INVALID_CREDENTIALS` - Invalid login credentials
    - `ACCOUNT_DISABLED` - Account disabled
    - `USER_NOT_FOUND` - User not found
    - `TOKEN_INVALID` - Invalid token
    - `TOKEN_EXPIRED` - Token expired

    ### Preferences Module Constants:
    - `PREFERENCES_RETRIEVED_SUCCESS` - Preferences retrieved successfully
    - `PREFERENCES_UPDATED_SUCCESS` - Preferences updated successfully
    - `PREFERENCES_CATEGORY_RETRIEVED_SUCCESS` - Category preferences retrieved
    - `PREFERENCES_CATEGORY_UPDATED_SUCCESS` - Category preferences updated
    - `PREFERENCES_RESET_SUCCESS` - Preferences reset to defaults
    - `DEFAULT_PREFERENCES_RETRIEVED_SUCCESS` - Default preferences template retrieved
    - `PREFERENCES_CATEGORY_INVALID` - Invalid preference category
    - `PREFERENCES_DATA_REQUIRED` - Preferences data required
    - `GAMING_DIFFICULTY_INVALID` - Invalid gaming difficulty level
    - `NOTIFICATION_FREQUENCY_INVALID` - Invalid notification frequency
    - `PRIVACY_VISIBILITY_INVALID` - Invalid privacy visibility setting
    - `DONATION_PERCENTAGE_INVALID` - Invalid donation percentage

    ### System Constants:
    - `SYSTEM_HEALTH_OK` - API health check success
    - `OPERATION_SUCCESS` - Operation completed successfully
    - `OPERATION_FAILED` - Operation failed
    - `DATA_REQUIRED` - Data required
    - `INVALID_REQUEST` - Invalid request
    - `UNAUTHORIZED_ACCESS` - Authentication required
    - `FORBIDDEN_ACTION` - Forbidden action
    - `RESOURCE_NOT_FOUND` - Resource not found
    - `INTERNAL_SERVER_ERROR` - Internal server error
    - `VALIDATION_ERROR` - Validation error
    - `DATABASE_ERROR` - Database error

    ### Social Module Message Constants (GOO-7):
    - `FRIEND_REQUEST_SENT_SUCCESS` - Friend request sent successfully
    - `FRIEND_REQUEST_ALREADY_FRIENDS` - Users are already friends
    - `FRIEND_REQUEST_ALREADY_SENT` - Friend request already sent
    - `FRIEND_REQUEST_USER_BLOCKED` - Cannot send request to blocked user
    - `FRIEND_REQUEST_NOT_ALLOWED` - User privacy settings don't allow requests
    - `FRIEND_REQUEST_ACCEPTED_SUCCESS` - Friend request accepted successfully
    - `FRIEND_REQUEST_DECLINED_SUCCESS` - Friend request declined successfully
    - `FRIEND_REQUEST_NOT_FOUND` - Friend request not found
    - `FRIEND_REQUEST_NOT_PENDING` - Friend request is not in pending state
    - `FRIEND_REQUEST_NOT_AUTHORIZED` - User not authorized for this request

    ### Game Engine Message Constants (GOO-8):
    - `GAMES_RETRIEVED_SUCCESS` - Games list retrieved successfully
    - `GAMES_SEARCH_SUCCESS` - Game search completed successfully
    - `GAME_CATEGORIES_RETRIEVED_SUCCESS` - Game categories retrieved successfully
    - `GAMES_STATS_RETRIEVED_SUCCESS` - Game statistics retrieved successfully
    - `GAME_INFO_RETRIEVED_SUCCESS` - Game information retrieved successfully
    - `GAME_PLUGIN_INSTALLED_SUCCESS` - Game plugin installed successfully
    - `GAME_PLUGIN_UNINSTALLED_SUCCESS` - Game plugin uninstalled successfully
    - `GAME_PLUGIN_VALIDATED_SUCCESS` - Game plugin validated successfully
    - `GAME_RATING_SUCCESS` - Game rated successfully
    - `GAME_SESSION_STARTED_SUCCESS` - Game session started successfully
    - `GAME_SESSION_ENDED_SUCCESS` - Game session ended successfully
    - `SESSION_RETRIEVED_SUCCESS` - Session information retrieved successfully
    - `SESSION_STATE_UPDATED_SUCCESS` - Session state updated successfully
    - `MOVE_VALIDATED_SUCCESS` - Move validated and recorded successfully
    - `SESSION_PAUSED_SUCCESS` - Session paused successfully
    - `SESSION_RESUMED_SUCCESS` - Session resumed successfully
    - `USER_SESSIONS_RETRIEVED_SUCCESS` - User sessions retrieved successfully
    - `USER_SESSION_STATS_RETRIEVED_SUCCESS` - User session statistics retrieved successfully
    - `GAME_NOT_FOUND` - Game not found
    - `GAME_NOT_ACTIVE` - Game is not active
    - `ACTIVE_SESSION_EXISTS` - User already has active session for this game
    - `GAME_PLUGIN_NOT_FOUND` - Game plugin not found
    - `PLUGIN_SESSION_START_FAILED` - Plugin failed to start session
    - `SESSION_CREATION_FAILED` - Failed to create session
    - `SESSION_NOT_FOUND` - Session not found
    - `SESSION_ALREADY_ENDED` - Session already ended
    - `SESSION_NOT_ACTIVE` - Session is not active
    - `SESSION_ACCESS_DENIED` - User not authorized to access this session
    - `INVALID_END_REASON` - Invalid session end reason
    - `SESSION_STATE_REQUIRED` - Session state is required
    - `MOVE_DATA_REQUIRED` - Move data is required
    - `INVALID_MOVE` - Move is not valid
    - `SESSION_NOT_PAUSED` - Session is not paused
    - `SEARCH_QUERY_TOO_SHORT` - Search query too short
    - `PLUGIN_FILE_REQUIRED` - Plugin file is required
    - `PLUGIN_FILE_EMPTY` - Plugin file is empty
    - `INVALID_RATING_VALUE` - Rating value must be between 1.0 and 5.0

    ### Enhanced Session Management Message Constants (GOO-9):
    - `SESSION_SYNC_SUCCESS` - Session synchronized successfully
    - `SYNC_CONFLICT_SERVER_WINS` - Sync conflict resolved - server state maintained
    - `SESSION_PROVIDED_SUCCESS` - Session provided for device successfully
    - `SYNC_CONFLICT_RESOLVED` - Synchronization conflict resolved successfully
    - `NO_SYNC_CONFLICTS` - No synchronization conflicts detected
    - `SYNC_CONFLICTS_DETECTED` - Synchronization conflicts detected
    - `ACTIVE_SESSIONS_RETRIEVED_SUCCESS` - Active sessions retrieved successfully
    - `SYNC_DATA_REQUIRED` - Synchronization data is required
    - `CONFLICT_RESOLUTION_DATA_REQUIRED` - Conflict resolution data is required
    - `INVALID_RESOLUTION_STRATEGY` - Invalid conflict resolution strategy
    - `ACTIVE_SESSIONS_RETRIEVAL_FAILED` - Failed to retrieve active sessions
    - `SESSION_SYNC_FAILED` - Session synchronization failed
    - `SESSION_PROVISION_FAILED` - Session provision for device failed
    - `SYNC_CONFLICT_RESOLUTION_FAILED` - Sync conflict resolution failed
    - `SYNC_CONFLICT_CHECK_FAILED` - Sync conflict check failed
    - `FRIEND_REMOVED_SUCCESS` - Friend removed successfully
    - `FRIEND_RELATIONSHIP_NOT_FOUND` - Friend relationship not found
    - `FRIENDS_LIST_SUCCESS` - Friends list retrieved successfully
    - `FRIEND_REQUESTS_SUCCESS` - Friend requests retrieved successfully
    - `USER_BLOCKED_SUCCESS` - User blocked successfully
    - `USER_ALREADY_BLOCKED` - User is already blocked
    - `USER_UNBLOCKED_SUCCESS` - User unblocked successfully
    - `USER_NOT_BLOCKED` - User is not blocked
    - `BLOCKED_USERS_SUCCESS` - Blocked users list retrieved successfully
    - `SEARCH_USERS_SUCCESS` - User search completed successfully
    - `SEARCH_NO_RESULTS` - No users found matching search criteria
    - `SEARCH_QUERY_TOO_SHORT` - Search query must be at least 2 characters
    - `SEARCH_USERS_FAILED` - User search failed
    - `FRIEND_SUGGESTIONS_SUCCESS` - Friend suggestions retrieved successfully
    - `FRIEND_SUGGESTIONS_FAILED` - Failed to retrieve friend suggestions
    - `RELATIONSHIP_STATUS_SUCCESS` - Relationship status retrieved successfully
    - `SOCIAL_STATS_SUCCESS` - Social statistics retrieved successfully
    - `USER_NOT_FOUND` - User not found
    - `TARGET_USER_NOT_FOUND` - Target user not found
    - `CANNOT_INTERACT_WITH_SELF` - Cannot perform this action on yourself
  version: 1.0.0
  contact:
    name: GoodPlay API Support
    
servers:
  - url: http://localhost:5000/api
    description: Development server
  - url: https://your-app.herokuapp.com/api
    description: Production server

tags:
  - name: Authentication
    description: User authentication (login, register, logout)
  - name: User Management
    description: User profile and account management
  - name: Health
    description: API health checks
  - name: User Preferences
    description: User preferences and settings management
  - name: Social
    description: Social features, friends, and relationships
  - name: Games
    description: Game engine, plugins, and sessions
  - name: Tournaments
    description: Tournament and competition management
  - name: Achievements
    description: Achievement system and badges
  - name: Leaderboards
    description: Scoring and ranking systems
  - name: Challenges
    description: Social challenges and competitions
  - name: Wallet
    description: Virtual wallet and credit management
  - name: Donations
    description: Donation processing and management
  - name: Impact
    description: Impact tracking and reporting
  - name: ONLUS
    description: ONLUS management and verification
  - name: Admin
    description: Administrative dashboard and management

paths:
  /health:
    get:
      tags:
        - Health
      summary: Health check
      description: Check if the API is running and healthy
      responses:
        '200':
          description: API is healthy
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HealthResponse'
              example:
                success: true
                message: "API_HEALTHY"
                status: "healthy"

  /auth/register:
    post:
      tags:
        - Authentication
      summary: Register new user
      description: Create a new user account with email, password and optional profile information
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RegisterRequest'
            example:
              email: "user@example.com"
              password: "securepassword123"
              first_name: "John"
              last_name: "Doe"
      responses:
        '201':
          description: User registered successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AuthResponse'
              example:
                success: true
                message: "Registration completed successfully"
                data:
                  user: {...}
                  tokens: {...}
        '400':
          description: Registration validation errors
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              examples:
                missing_data:
                  summary: Missing request data
                  value:
                    success: false
                    message: "Data required"
                missing_credentials:
                  summary: Missing email or password
                  value:
                    success: false
                    message: "Email and password are required"
                invalid_email:
                  summary: Invalid email format
                  value:
                    success: false
                    message: "Invalid email format"
                weak_password:
                  summary: Password too short
                  value:
                    success: false
                    message: "Password must be at least 6 characters long"
                email_exists:
                  summary: Email already registered
                  value:
                    success: false
                    message: "Email already registered"
                registration_error:
                  summary: Registration process failed
                  value:
                    success: false
                    message: "Error during registration"
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              examples:
                validation_error:
                  value:
                    success: false
                    message: "VALIDATION_ERROR"
                email_exists:
                  value:
                    success: false
                    message: "EMAIL_ALREADY_EXISTS"

  /auth/login:
    post:
      tags:
        - Authentication
      summary: User login
      description: Authenticate user with email and password
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LoginRequest'
            example:
              email: "user@example.com"
              password: "securepassword123"
      responses:
        '200':
          description: Login successful
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AuthResponse'
              example:
                success: true
                message: "Login successful"
                data:
                  user: {...}
                  tokens: {...}
        '400':
          description: Missing request data
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              examples:
                missing_data:
                  summary: Missing request data
                  value:
                    success: false
                    message: "Data required"
        '401':
          description: Authentication errors
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              examples:
                missing_credentials:
                  summary: Missing email or password
                  value:
                    success: false
                    message: "Email and password are required"
                invalid_credentials:
                  summary: Invalid email/password combination
                  value:
                    success: false
                    message: "Invalid credentials"
                account_disabled:
                  summary: User account is disabled
                  value:
                    success: false
                    message: "Account disabled"
                login_error:
                  summary: Login process failed
                  value:
                    success: false
                    message: "Error during login"
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              example:
                success: false
                message: "Internal server error"

  /auth/refresh:
    post:
      tags:
        - Authentication
      summary: Refresh access token
      description: Get a new access token using a valid refresh token
      security:
        - JWTRefreshAuth: []
      responses:
        '200':
          description: Token refreshed successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Token refreshed successfully"
                  data:
                    type: object
                    properties:
                      access_token:
                        type: string
                        example: "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9..."
        '401':
          description: Token refresh errors
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              examples:
                user_not_found:
                  summary: User not found or disabled
                  value:
                    success: false
                    message: "User not found or disabled"
                refresh_error:
                  summary: Token refresh failed
                  value:
                    success: false
                    message: "Error refreshing token"
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'


  /auth/logout:
    post:
      tags:
        - Authentication
      summary: User logout
      description: Logout the authenticated user
      security:
        - JWTAuth: []
      responses:
        '200':
          description: Logout successful
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Logout successful"
        '401':
          description: Authentication required
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  # User Management Endpoints
  /user/profile:
    get:
      tags:
        - User Management
      summary: Get user profile
      description: Retrieve the authenticated user's profile information including extended fields
      security:
        - JWTAuth: []
      responses:
        '200':
          description: Profile retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "PROFILE_RETRIEVED_SUCCESS"
                  data:
                    type: object
                    properties:
                      user:
                        $ref: '#/components/schemas/ExtendedUser'
        '401':
          description: Authentication required or invalid token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

    put:
      tags:
        - User Management
      summary: Update user profile
      description: Update the authenticated user's profile information including extended fields
      security:
        - JWTAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ExtendedUpdateProfileRequest'
            example:
              first_name: "Gaming"
              last_name: "Master"
              preferences:
                notification_enabled: false
                preferred_game_categories: ["action", "adventure"]
                donation_frequency: "monthly"
              social_profile:
                display_name: "GamingMaster"
                privacy_level: "friends"
      responses:
        '200':
          description: Profile updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Profile updated successfully"
                  data:
                    type: object
                    properties:
                      user:
                        $ref: '#/components/schemas/ExtendedUser'
        '400':
          description: No fields to update or validation error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Authentication required
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /user/social-profile:
    put:
      tags:
        - User Management
      summary: Update social profile
      description: Update user social profile settings
      security:
        - JWTAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SocialProfileUpdate'
            example:
              display_name: "SuperGamer2025"
              privacy_level: "public"
      responses:
        '200':
          description: Social profile updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Social profile updated successfully"
                  data:
                    type: object
                    properties:
                      user:
                        $ref: '#/components/schemas/ExtendedUser'
        '400':
          description: Validation error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Authentication required
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /user/gaming-stats:
    get:
      tags:
        - User Management
      summary: Get gaming statistics
      description: Retrieve user's gaming statistics and impact score
      security:
        - JWTAuth: []
      responses:
        '200':
          description: Gaming stats retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Gaming stats retrieved successfully"
                  data:
                    type: object
                    properties:
                      gaming_stats:
                        $ref: '#/components/schemas/GamingStats'
                      impact_score:
                        type: number
                        example: 85
        '401':
          description: Authentication required
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

    put:
      tags:
        - User Management
      summary: Update gaming statistics
      description: Update user's gaming statistics
      security:
        - JWTAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GamingStatsUpdate'
            example:
              play_time: 45
              game_category: "puzzle"
      responses:
        '200':
          description: Gaming stats updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Gaming stats updated successfully"
                  data:
                    type: object
                    properties:
                      user:
                        $ref: '#/components/schemas/ExtendedUser'
        '400':
          description: Validation error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Authentication required
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /user/wallet:
    get:
      tags:
        - User Management
      summary: Get wallet information
      description: Retrieve user's wallet credits and transaction history
      security:
        - JWTAuth: []
      responses:
        '200':
          description: Wallet information retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Wallet information retrieved successfully"
                  data:
                    type: object
                    properties:
                      wallet_credits:
                        $ref: '#/components/schemas/WalletCredits'
        '401':
          description: Authentication required
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /user/credits:
    post:
      tags:
        - User Management
      summary: Add credits to wallet
      description: Add credits to user's wallet (earned through gaming or other activities)
      security:
        - JWTAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AddCreditsRequest'
            example:
              amount: 25.5
              transaction_type: "earned"
      responses:
        '200':
          description: Credits added successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Credits added successfully"
                  data:
                    type: object
                    properties:
                      user:
                        $ref: '#/components/schemas/ExtendedUser'
        '400':
          description: Invalid amount or validation error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Authentication required
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /user/donate:
    post:
      tags:
        - User Management
      summary: Donate credits
      description: Donate user credits to ONLUS organizations
      security:
        - JWTAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DonateCreditsRequest'
            example:
              amount: 10.0
              onlus_id: "example_onlus_id"
      responses:
        '200':
          description: Donation successful
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Donation successful"
                  data:
                    type: object
                    properties:
                      user:
                        $ref: '#/components/schemas/ExtendedUser'
        '400':
          description: Insufficient credits or validation error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Authentication required
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  # User Preferences Endpoints
  /preferences:
    get:
      tags:
        - User Preferences
      summary: Get user preferences
      description: Retrieve all preferences for the authenticated user
      security:
        - JWTAuth: []
      responses:
        '200':
          description: Preferences retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "PREFERENCES_RETRIEVED_SUCCESS"
                  data:
                    type: object
                    properties:
                      preferences:
                        $ref: '#/components/schemas/UserPreferences'
        '400':
          description: User or preferences errors
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              examples:
                user_not_found:
                  summary: User not found
                  value:
                    success: false
                    message: "USER_NOT_FOUND"
                preferences_retrieval_failed:
                  summary: Failed to retrieve preferences
                  value:
                    success: false
                    message: "PREFERENCES_RETRIEVAL_FAILED"
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              example:
                success: false
                message: "INTERNAL_SERVER_ERROR"

    put:
      tags:
        - User Preferences
      summary: Update user preferences
      description: Update preferences for the authenticated user
      security:
        - JWTAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PreferencesUpdateRequest'
      responses:
        '200':
          description: Preferences updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "PREFERENCES_UPDATED_SUCCESS"
                  data:
                    type: object
                    properties:
                      preferences:
                        $ref: '#/components/schemas/UserPreferences'
        '400':
          description: Validation and update errors
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              examples:
                data_required:
                  summary: Missing preferences data
                  value:
                    success: false
                    message: "PREFERENCES_DATA_REQUIRED"
                user_not_found:
                  summary: User not found
                  value:
                    success: false
                    message: "USER_NOT_FOUND"
                update_failed:
                  summary: Failed to update preferences
                  value:
                    success: false
                    message: "PREFERENCES_UPDATE_FAILED"
                validation_error:
                  summary: Validation errors from User model
                  value:
                    success: false
                    message: "GAMING_DIFFICULTY_INVALID"
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              example:
                success: false
                message: "INTERNAL_SERVER_ERROR"

  /preferences/reset:
    post:
      tags:
        - User Preferences
      summary: Reset preferences to defaults
      description: Reset user preferences to default values
      security:
        - JWTAuth: []
      responses:
        '200':
          description: Preferences reset successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Preferences reset to defaults"
                  data:
                    $ref: '#/components/schemas/UserPreferences'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'

  # Social Endpoints - GOO-7 Social Graph Foundation
  /social/friend-request:
    post:
      tags:
        - Social
      summary: Send friend request
      description: Send a friend request to another user
      security:
        - JWTAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                target_user_id:
                  type: string
                  description: ID of user to send friend request to
                  example: "507f1f77bcf86cd799439012"
              required:
                - target_user_id
      responses:
        '201':
          description: Friend request sent successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "FRIEND_REQUEST_SENT_SUCCESS"
                  data:
                    type: object
                    properties:
                      relationship_id:
                        type: string
                        example: "507f1f77bcf86cd799439013"
                      target_user_id:
                        type: string
                        example: "507f1f77bcf86cd799439012"
                      status:
                        type: string
                        example: "pending"
        '400':
          description: Bad request or validation error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              examples:
                already_friends:
                  value:
                    success: false
                    message: "FRIEND_REQUEST_ALREADY_FRIENDS"
                already_sent:
                  value:
                    success: false
                    message: "FRIEND_REQUEST_ALREADY_SENT"
                user_blocked:
                  value:
                    success: false
                    message: "FRIEND_REQUEST_USER_BLOCKED"
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /social/friend-request/{relationship_id}/accept:
    put:
      tags:
        - Social
      summary: Accept friend request
      description: Accept a pending friend request
      security:
        - JWTAuth: []
      parameters:
        - name: relationship_id
          in: path
          required: true
          schema:
            type: string
          description: Relationship ID of the friend request
          example: "507f1f77bcf86cd799439013"
      responses:
        '200':
          description: Friend request accepted successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "FRIEND_REQUEST_ACCEPTED_SUCCESS"
                  data:
                    type: object
                    properties:
                      relationship_id:
                        type: string
                        example: "507f1f77bcf86cd799439013"
                      friend_user_id:
                        type: string
                        example: "507f1f77bcf86cd799439012"
                      status:
                        type: string
                        example: "accepted"
        '400':
          description: Request not pending or not authorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              examples:
                not_found:
                  value:
                    success: false
                    message: "FRIEND_REQUEST_NOT_FOUND"
                not_pending:
                  value:
                    success: false
                    message: "FRIEND_REQUEST_NOT_PENDING"
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /social/friend-request/{relationship_id}/decline:
    put:
      tags:
        - Social
      summary: Decline friend request
      description: Decline a pending friend request
      security:
        - JWTAuth: []
      parameters:
        - name: relationship_id
          in: path
          required: true
          schema:
            type: string
          description: Relationship ID of the friend request
          example: "507f1f77bcf86cd799439013"
      responses:
        '200':
          description: Friend request declined successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "FRIEND_REQUEST_DECLINED_SUCCESS"
                  data:
                    type: object
                    properties:
                      relationship_id:
                        type: string
                        example: "507f1f77bcf86cd799439013"
        '400':
          description: Request not found or not authorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /social/friends:
    get:
      tags:
        - Social
      summary: Get friends list
      description: Get list of user's friends with pagination
      security:
        - JWTAuth: []
      parameters:
        - name: limit
          in: query
          schema:
            type: integer
            default: 50
            maximum: 100
          description: Maximum number of friends to return
        - name: skip
          in: query
          schema:
            type: integer
            default: 0
          description: Number of friends to skip for pagination
      responses:
        '200':
          description: Friends list retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "FRIENDS_LIST_SUCCESS"
                  data:
                    type: object
                    properties:
                      friends:
                        type: array
                        items:
                          $ref: '#/components/schemas/Friend'
                      total:
                        type: integer
                        example: 25
                      pagination:
                        type: object
                        properties:
                          limit:
                            type: integer
                            example: 50
                          skip:
                            type: integer
                            example: 0
                          has_more:
                            type: boolean
                            example: false
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /social/friends/{friend_user_id}:
    delete:
      tags:
        - Social
      summary: Remove friend
      description: Remove a friend from your friends list
      security:
        - JWTAuth: []
      parameters:
        - name: friend_user_id
          in: path
          required: true
          schema:
            type: string
          description: ID of the friend to remove
          example: "507f1f77bcf86cd799439012"
      responses:
        '200':
          description: Friend removed successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "FRIEND_REMOVED_SUCCESS"
                  data:
                    type: object
                    properties:
                      removed_user_id:
                        type: string
                        example: "507f1f77bcf86cd799439012"
        '400':
          description: Friend relationship not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              example:
                success: false
                message: "FRIEND_RELATIONSHIP_NOT_FOUND"
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /social/friend-requests:
    get:
      tags:
        - Social
      summary: Get friend requests
      description: Get received or sent friend requests
      security:
        - JWTAuth: []
      parameters:
        - name: type
          in: query
          schema:
            type: string
            enum: [received, sent]
            default: received
          description: Type of friend requests to retrieve
        - name: limit
          in: query
          schema:
            type: integer
            default: 20
            maximum: 100
          description: Maximum number of requests to return
        - name: skip
          in: query
          schema:
            type: integer
            default: 0
          description: Number of requests to skip for pagination
      responses:
        '200':
          description: Friend requests retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "FRIEND_REQUESTS_SUCCESS"
                  data:
                    type: object
                    properties:
                      requests:
                        type: array
                        items:
                          $ref: '#/components/schemas/FriendRequest'
                      total:
                        type: integer
                        example: 5
                      type:
                        type: string
                        example: "received"
                      pagination:
                        type: object
                        properties:
                          limit:
                            type: integer
                            example: 20
                          skip:
                            type: integer
                            example: 0
                          has_more:
                            type: boolean
                            example: false
        '400':
          description: Invalid request type
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /social/users/search:
    post:
      tags:
        - Social
      summary: Search users
      description: Search for users by name or email with privacy controls
      security:
        - JWTAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                query:
                  type: string
                  description: Search query (minimum 2 characters)
                  example: "john doe"
                limit:
                  type: integer
                  default: 20
                  maximum: 50
                  description: Maximum number of results to return
                skip:
                  type: integer
                  default: 0
                  description: Number of results to skip for pagination
              required:
                - query
      responses:
        '200':
          description: User search completed
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "SEARCH_USERS_SUCCESS"
                  data:
                    type: object
                    properties:
                      users:
                        type: array
                        items:
                          $ref: '#/components/schemas/SearchUser'
                      total:
                        type: integer
                        example: 10
                      query:
                        type: string
                        example: "john doe"
                      pagination:
                        type: object
                        properties:
                          limit:
                            type: integer
                            example: 20
                          skip:
                            type: integer
                            example: 0
                          has_more:
                            type: boolean
                            example: false
        '400':
          description: Search query too short or invalid
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              example:
                success: false
                message: "SEARCH_QUERY_TOO_SHORT"
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /social/users/suggestions:
    get:
      tags:
        - Social
      summary: Get friend suggestions
      description: Get AI-powered friend suggestions based on mutual connections and interests
      security:
        - JWTAuth: []
      parameters:
        - name: limit
          in: query
          schema:
            type: integer
            default: 10
            maximum: 20
          description: Maximum number of suggestions to return
      responses:
        '200':
          description: Friend suggestions retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "FRIEND_SUGGESTIONS_SUCCESS"
                  data:
                    type: object
                    properties:
                      suggestions:
                        type: array
                        items:
                          $ref: '#/components/schemas/UserSuggestion'
                      total:
                        type: integer
                        example: 5
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /social/users/{target_user_id}/block:
    post:
      tags:
        - Social
      summary: Block user
      description: Block another user and remove existing friendship
      security:
        - JWTAuth: []
      parameters:
        - name: target_user_id
          in: path
          required: true
          schema:
            type: string
          description: ID of user to block
          example: "507f1f77bcf86cd799439012"
      responses:
        '201':
          description: User blocked successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "USER_BLOCKED_SUCCESS"
                  data:
                    type: object
                    properties:
                      blocked_user_id:
                        type: string
                        example: "507f1f77bcf86cd799439012"
                      relationship_id:
                        type: string
                        example: "507f1f77bcf86cd799439014"
        '400':
          description: User already blocked or invalid request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              example:
                success: false
                message: "USER_ALREADY_BLOCKED"
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /social/users/{target_user_id}/unblock:
    delete:
      tags:
        - Social
      summary: Unblock user
      description: Remove block relationship with another user
      security:
        - JWTAuth: []
      parameters:
        - name: target_user_id
          in: path
          required: true
          schema:
            type: string
          description: ID of user to unblock
          example: "507f1f77bcf86cd799439012"
      responses:
        '200':
          description: User unblocked successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "USER_UNBLOCKED_SUCCESS"
                  data:
                    type: object
                    properties:
                      unblocked_user_id:
                        type: string
                        example: "507f1f77bcf86cd799439012"
        '400':
          description: User not blocked
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              example:
                success: false
                message: "USER_NOT_BLOCKED"
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /social/blocked-users:
    get:
      tags:
        - Social
      summary: Get blocked users
      description: Get list of users blocked by current user
      security:
        - JWTAuth: []
      parameters:
        - name: limit
          in: query
          schema:
            type: integer
            default: 50
            maximum: 100
          description: Maximum number of blocked users to return
        - name: skip
          in: query
          schema:
            type: integer
            default: 0
          description: Number of results to skip for pagination
      responses:
        '200':
          description: Blocked users list retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "BLOCKED_USERS_SUCCESS"
                  data:
                    type: object
                    properties:
                      blocked_users:
                        type: array
                        items:
                          $ref: '#/components/schemas/BlockedUser'
                      total:
                        type: integer
                        example: 3
                      pagination:
                        type: object
                        properties:
                          limit:
                            type: integer
                            example: 50
                          skip:
                            type: integer
                            example: 0
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /social/relationship-status/{target_user_id}:
    get:
      tags:
        - Social
      summary: Get relationship status
      description: Get current relationship status with another user
      security:
        - JWTAuth: []
      parameters:
        - name: target_user_id
          in: path
          required: true
          schema:
            type: string
          description: ID of user to check relationship with
          example: "507f1f77bcf86cd799439012"
      responses:
        '200':
          description: Relationship status retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "RELATIONSHIP_STATUS_SUCCESS"
                  data:
                    type: object
                    properties:
                      target_user_id:
                        type: string
                        example: "507f1f77bcf86cd799439012"
                      relationship:
                        $ref: '#/components/schemas/RelationshipStatus'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /social/stats:
    get:
      tags:
        - Social
      summary: Get social statistics
      description: Get current user's social statistics (friends count, pending requests, etc.)
      security:
        - JWTAuth: []
      responses:
        '200':
          description: Social statistics retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "SOCIAL_STATS_SUCCESS"
                  data:
                    $ref: '#/components/schemas/SocialStats'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'

  # Games Endpoints
  /games:
    get:
      tags:
        - Games
      summary: Get available games
      description: Get list of available games
      parameters:
        - name: category
          in: query
          schema:
            type: string
          description: Filter by game category
        - name: limit
          in: query
          schema:
            type: integer
            default: 50
          description: Number of results to return
      responses:
        '200':
          description: Games retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Games retrieved successfully"
                  data:
                    type: object
                    properties:
                      games:
                        type: array
                        items:
                          $ref: '#/components/schemas/Game'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /games/{game_id}/sessions:
    post:
      tags:
        - Games
      summary: Start game session
      description: Start a new game session
      security:
        - JWTAuth: []
      parameters:
        - name: game_id
          in: path
          required: true
          schema:
            type: string
          description: Game ID
      responses:
        '201':
          description: Game session started successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Game session started"
                  data:
                    $ref: '#/components/schemas/GameSession'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /games/sessions/{id}/end:
    post:
      tags:
        - Games
      summary: End game session
      description: End an active game session
      security:
        - JWTAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
          description: Session ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                final_score:
                  type: integer
                  example: 1500
                game_state:
                  type: object
                  description: Final game state
      responses:
        '200':
          description: Game session ended successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Game session ended"
                  data:
                    type: object
                    properties:
                      session:
                        $ref: '#/components/schemas/GameSession'
                      credits_earned:
                        type: number
                        format: float
                        example: 0.25
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'

  # Wallet Endpoints
  /wallet:
    get:
      tags:
        - Wallet
      summary: Get wallet balance
      description: Get current wallet balance and statistics
      security:
        - JWTAuth: []
      responses:
        '200':
          description: Wallet information retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Wallet retrieved successfully"
                  data:
                    $ref: '#/components/schemas/Wallet'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /wallet/transactions:
    get:
      tags:
        - Wallet
      summary: Get transaction history
      description: Get wallet transaction history
      security:
        - JWTAuth: []
      parameters:
        - name: limit
          in: query
          schema:
            type: integer
            default: 50
          description: Number of results to return
        - name: offset
          in: query
          schema:
            type: integer
            default: 0
          description: Offset for pagination
        - name: type
          in: query
          schema:
            type: string
            enum: [credit_earned, donation, bonus]
          description: Filter by transaction type
      responses:
        '200':
          description: Transactions retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Transactions retrieved successfully"
                  data:
                    type: object
                    properties:
                      transactions:
                        type: array
                        items:
                          $ref: '#/components/schemas/WalletTransaction'
                      total:
                        type: integer
                        example: 150
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'

  # Donations Endpoints
  /donations:
    post:
      tags:
        - Donations
      summary: Process donation
      description: Process a donation to an ONLUS
      security:
        - JWTAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DonationRequest'
      responses:
        '201':
          description: Donation processed successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Donation processed successfully"
                  data:
                    $ref: '#/components/schemas/Donation'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'

    get:
      tags:
        - Donations
      summary: Get user donations
      description: Get donation history for the authenticated user
      security:
        - JWTAuth: []
      parameters:
        - name: limit
          in: query
          schema:
            type: integer
            default: 50
          description: Number of results to return
        - name: offset
          in: query
          schema:
            type: integer
            default: 0
          description: Offset for pagination
      responses:
        '200':
          description: Donations retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Donations retrieved successfully"
                  data:
                    type: object
                    properties:
                      donations:
                        type: array
                        items:
                          $ref: '#/components/schemas/Donation'
                      total:
                        type: integer
                        example: 25
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'

  # ONLUS Endpoints
  /onlus:
    get:
      tags:
        - ONLUS
      summary: Search ONLUS organizations
      description: Search and filter verified ONLUS organizations
      parameters:
        - name: category
          in: query
          schema:
            type: string
          description: Filter by category
        - name: search
          in: query
          schema:
            type: string
          description: Search in name and description
        - name: limit
          in: query
          schema:
            type: integer
            default: 50
          description: Number of results to return
        - name: offset
          in: query
          schema:
            type: integer
            default: 0
          description: Offset for pagination
      responses:
        '200':
          description: ONLUS organizations retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "ONLUS organizations retrieved successfully"
                  data:
                    type: object
                    properties:
                      organizations:
                        type: array
                        items:
                          $ref: '#/components/schemas/ONLUS'
                      total:
                        type: integer
                        example: 75
        '500':
          $ref: '#/components/responses/InternalServerError'

  /onlus/{id}:
    get:
      tags:
        - ONLUS
      summary: Get ONLUS details
      description: Get detailed information about a specific ONLUS
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
          description: ONLUS ID
      responses:
        '200':
          description: ONLUS details retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "ONLUS details retrieved successfully"
                  data:
                    $ref: '#/components/schemas/ONLUSDetail'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'

  # Impact Tracking Endpoints
  /impact/user:
    get:
      tags:
        - Impact
      summary: Get user impact summary
      description: Get personal impact summary for authenticated user
      security:
        - JWTAuth: []
      responses:
        '200':
          description: Impact summary retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Impact summary retrieved successfully"
                  data:
                    $ref: '#/components/schemas/UserImpactSummary'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'

  # Game Engine Endpoints
  /api/games:
    get:
      tags:
        - Games
      summary: Get all available games
      description: Retrieve all games with pagination and filtering options
      parameters:
        - in: query
          name: active_only
          schema:
            type: boolean
            default: true
          description: Filter to only active games
        - in: query
          name: category
          schema:
            type: string
          description: Filter by game category
        - in: query
          name: page
          schema:
            type: integer
            minimum: 1
            default: 1
          description: Page number for pagination
        - in: query
          name: limit
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 20
          description: Number of games per page
        - in: query
          name: sort_by
          schema:
            type: string
            enum: [created_at, rating, install_count, name]
            default: created_at
          description: Sort field
      responses:
        '200':
          description: Games retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "GAMES_RETRIEVED_SUCCESS"
                  data:
                    type: object
                    properties:
                      games:
                        type: array
                        items:
                          $ref: '#/components/schemas/Game'
                      pagination:
                        $ref: '#/components/schemas/PaginationInfo'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /api/games/search:
    get:
      tags:
        - Games
      summary: Search games
      description: Search games by name or description
      parameters:
        - in: query
          name: q
          required: true
          schema:
            type: string
            minLength: 2
          description: Search query
        - in: query
          name: active_only
          schema:
            type: boolean
            default: true
          description: Filter to only active games
      responses:
        '200':
          description: Search completed successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "GAMES_SEARCH_SUCCESS"
                  data:
                    type: object
                    properties:
                      games:
                        type: array
                        items:
                          $ref: '#/components/schemas/Game'
                      query:
                        type: string
                      count:
                        type: integer
        '400':
          $ref: '#/components/responses/BadRequestError'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /api/games/categories:
    get:
      tags:
        - Games
      summary: Get game categories
      description: Retrieve all available game categories
      responses:
        '200':
          description: Categories retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "GAME_CATEGORIES_RETRIEVED_SUCCESS"
                  data:
                    type: object
                    properties:
                      categories:
                        type: array
                        items:
                          type: object
                          properties:
                            _id:
                              type: string
                            count:
                              type: integer
                      total_categories:
                        type: integer
        '500':
          $ref: '#/components/responses/InternalServerError'

  /api/games/stats:
    get:
      tags:
        - Games
      summary: Get games statistics
      description: Retrieve platform-wide game statistics
      responses:
        '200':
          description: Statistics retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "GAMES_STATS_RETRIEVED_SUCCESS"
                  data:
                    $ref: '#/components/schemas/GameStats'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /api/games/install:
    post:
      tags:
        - Games
      summary: Install game plugin
      description: Install a new game plugin (admin only)
      security:
        - JWTAuth: []
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                plugin_file:
                  type: string
                  format: binary
                  description: Game plugin zip file
                plugin_id:
                  type: string
                  description: Optional custom plugin ID
              required:
                - plugin_file
      responses:
        '201':
          description: Plugin installed successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "GAME_PLUGIN_INSTALLED_SUCCESS"
                  data:
                    type: object
                    properties:
                      game:
                        $ref: '#/components/schemas/Game'
                      plugin_id:
                        type: string
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /api/games/{game_id}:
    get:
      tags:
        - Games
      summary: Get game details
      description: Get detailed information about a specific game
      parameters:
        - in: path
          name: game_id
          required: true
          schema:
            type: string
          description: Game ID
      responses:
        '200':
          description: Game details retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "GAME_INFO_RETRIEVED_SUCCESS"
                  data:
                    type: object
                    properties:
                      game:
                        $ref: '#/components/schemas/Game'
                      plugin_info:
                        $ref: '#/components/schemas/PluginInfo'
                      rules:
                        $ref: '#/components/schemas/GameRules'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /api/games/{game_id}/uninstall:
    delete:
      tags:
        - Games
      summary: Uninstall game plugin
      description: Uninstall a game plugin (admin only)
      security:
        - JWTAuth: []
      parameters:
        - in: path
          name: game_id
          required: true
          schema:
            type: string
          description: Game ID
      responses:
        '200':
          description: Plugin uninstalled successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "GAME_PLUGIN_UNINSTALLED_SUCCESS"
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /api/games/{game_id}/validate:
    post:
      tags:
        - Games
      summary: Validate game plugin
      description: Validate a game plugin (admin only)
      security:
        - JWTAuth: []
      parameters:
        - in: path
          name: game_id
          required: true
          schema:
            type: string
          description: Game ID
      responses:
        '200':
          description: Plugin validation completed
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "GAME_PLUGIN_VALIDATED_SUCCESS"
                  data:
                    $ref: '#/components/schemas/PluginValidation'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /api/games/{game_id}/rate:
    post:
      tags:
        - Games
      summary: Rate a game
      description: Rate a game (authenticated users only)
      security:
        - JWTAuth: []
      parameters:
        - in: path
          name: game_id
          required: true
          schema:
            type: string
          description: Game ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                rating:
                  type: number
                  minimum: 1.0
                  maximum: 5.0
                  description: Rating from 1.0 to 5.0
              required:
                - rating
      responses:
        '200':
          description: Game rated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "GAME_RATING_SUCCESS"
                  data:
                    type: object
                    properties:
                      game_id:
                        type: string
                      new_rating:
                        type: number
                      total_ratings:
                        type: integer
                      previous_rating:
                        type: number
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /api/games/{game_id}/sessions:
    post:
      tags:
        - Game Sessions
      summary: Start game session
      description: Start a new game session
      security:
        - JWTAuth: []
      parameters:
        - in: path
          name: game_id
          required: true
          schema:
            type: string
          description: Game ID
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                session_config:
                  type: object
                  description: Optional session configuration
      responses:
        '201':
          description: Game session started successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "GAME_SESSION_STARTED_SUCCESS"
                  data:
                    type: object
                    properties:
                      session:
                        $ref: '#/components/schemas/GameSession'
                      game:
                        $ref: '#/components/schemas/Game'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /api/games/sessions:
    get:
      tags:
        - Game Sessions
      summary: Get user sessions
      description: Get game sessions for the current user
      security:
        - JWTAuth: []
      parameters:
        - in: query
          name: status
          schema:
            type: string
            enum: [active, paused, completed, abandoned]
          description: Filter by session status
        - in: query
          name: page
          schema:
            type: integer
            minimum: 1
            default: 1
          description: Page number
        - in: query
          name: limit
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 20
          description: Number of sessions per page
      responses:
        '200':
          description: Sessions retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "USER_SESSIONS_RETRIEVED_SUCCESS"
                  data:
                    type: object
                    properties:
                      sessions:
                        type: array
                        items:
                          $ref: '#/components/schemas/GameSessionWithGame'
                      pagination:
                        $ref: '#/components/schemas/PaginationInfo'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /api/games/sessions/stats:
    get:
      tags:
        - Game Sessions
      summary: Get user session statistics
      description: Get session statistics for the current user
      security:
        - JWTAuth: []
      responses:
        '200':
          description: Session statistics retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "USER_SESSION_STATS_RETRIEVED_SUCCESS"
                  data:
                    $ref: '#/components/schemas/UserSessionStats'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /api/games/sessions/{session_id}:
    get:
      tags:
        - Game Sessions
      summary: Get game session
      description: Get a specific game session by ID
      security:
        - JWTAuth: []
      parameters:
        - in: path
          name: session_id
          required: true
          schema:
            type: string
          description: Session ID
      responses:
        '200':
          description: Session retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "SESSION_RETRIEVED_SUCCESS"
                  data:
                    type: object
                    properties:
                      session:
                        $ref: '#/components/schemas/GameSession'
                      game:
                        $ref: '#/components/schemas/Game'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /api/games/sessions/{session_id}/end:
    put:
      tags:
        - Game Sessions
      summary: End game session
      description: End an active game session
      security:
        - JWTAuth: []
      parameters:
        - in: path
          name: session_id
          required: true
          schema:
            type: string
          description: Session ID
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                reason:
                  type: string
                  enum: [completed, abandoned]
                  default: completed
                  description: Reason for ending the session
      responses:
        '200':
          description: Session ended successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "GAME_SESSION_ENDED_SUCCESS"
                  data:
                    type: object
                    properties:
                      session:
                        $ref: '#/components/schemas/GameSession'
                      session_result:
                        $ref: '#/components/schemas/SessionResult'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /api/games/sessions/{session_id}/state:
    put:
      tags:
        - Game Sessions
      summary: Update session state
      description: Update the state of an active game session
      security:
        - JWTAuth: []
      parameters:
        - in: path
          name: session_id
          required: true
          schema:
            type: string
          description: Session ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                state:
                  type: object
                  description: New session state data
              required:
                - state
      responses:
        '200':
          description: Session state updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "SESSION_STATE_UPDATED_SUCCESS"
                  data:
                    type: object
                    properties:
                      session:
                        $ref: '#/components/schemas/GameSession'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /api/games/sessions/{session_id}/moves:
    post:
      tags:
        - Game Sessions
      summary: Validate and record move
      description: Validate and record a move in a game session
      security:
        - JWTAuth: []
      parameters:
        - in: path
          name: session_id
          required: true
          schema:
            type: string
          description: Session ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                move:
                  type: object
                  description: Move data (format depends on game)
              required:
                - move
      responses:
        '200':
          description: Move validated and recorded successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "MOVE_VALIDATED_SUCCESS"
                  data:
                    type: object
                    properties:
                      session_id:
                        type: string
                      move_valid:
                        type: boolean
                      move_number:
                        type: integer
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /api/games/sessions/{session_id}/pause:
    put:
      tags:
        - Game Sessions
      summary: Pause game session
      description: Pause an active game session
      security:
        - JWTAuth: []
      parameters:
        - in: path
          name: session_id
          required: true
          schema:
            type: string
          description: Session ID
      responses:
        '200':
          description: Session paused successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "SESSION_PAUSED_SUCCESS"
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /api/games/sessions/{session_id}/resume:
    put:
      tags:
        - Game Sessions
      summary: Resume game session
      description: Resume a paused game session
      security:
        - JWTAuth: []
      parameters:
        - in: path
          name: session_id
          required: true
          schema:
            type: string
          description: Session ID
      responses:
        '200':
          description: Session resumed successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "SESSION_RESUMED_SUCCESS"
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'

  # Enhanced GOO-9 Session Management Endpoints

  /api/games/sessions/{session_id}/sync:
    post:
      tags:
        - Game Sessions
      summary: Synchronize session state (GOO-9)
      description: |
        Synchronize session state from a device for cross-device play.
        Handles conflict resolution and maintains session consistency.
      security:
        - JWTAuth: []
      parameters:
        - in: path
          name: session_id
          required: true
          schema:
            type: string
          description: Session ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                device_state:
                  type: object
                  properties:
                    current_state:
                      type: object
                      description: Current game state
                    play_duration_ms:
                      type: integer
                      description: Play duration in milliseconds
                    score:
                      type: integer
                      description: Current score
                    sync_version:
                      type: integer
                      description: Device sync version
                    new_moves:
                      type: array
                      items:
                        type: object
                      description: New moves since last sync
                    new_achievements:
                      type: array
                      items:
                        type: string
                      description: New achievements unlocked
                    statistics:
                      type: object
                      description: Updated game statistics
                device_info:
                  type: object
                  properties:
                    device_id:
                      type: string
                    device_type:
                      type: string
                      enum: [mobile, web, desktop]
                    platform:
                      type: string
                    app_version:
                      type: string
                timestamp:
                  type: string
                  format: date-time
              required:
                - device_state
                - device_info
      responses:
        '200':
          description: Session synchronized successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    enum:
                      - "SESSION_SYNC_SUCCESS"
                  data:
                    type: object
                    properties:
                      session:
                        $ref: '#/components/schemas/EnhancedGameSession'
                      sync_version:
                        type: integer
                      last_sync_at:
                        type: string
                        format: date-time
        '409':
          description: Sync conflict detected
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "SYNC_CONFLICT_SERVER_WINS"
                  data:
                    type: object
                    properties:
                      session:
                        $ref: '#/components/schemas/EnhancedGameSession'
                      conflict_resolution:
                        type: string
                        example: "server_wins"
                      server_sync_version:
                        type: integer
                      device_sync_version:
                        type: integer
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /api/games/sessions/{session_id}/device:
    get:
      tags:
        - Game Sessions
      summary: Get session for device (GOO-9)
      description: Get session state optimized for a specific device type
      security:
        - JWTAuth: []
      parameters:
        - in: path
          name: session_id
          required: true
          schema:
            type: string
          description: Session ID
        - in: query
          name: device_id
          schema:
            type: string
          description: Device identifier
        - in: query
          name: device_type
          schema:
            type: string
            enum: [mobile, web, desktop]
          description: Device type
        - in: header
          name: X-Device-ID
          schema:
            type: string
          description: Device ID from header
        - in: header
          name: X-Device-Type
          schema:
            type: string
          description: Device type from header
        - in: header
          name: X-App-Version
          schema:
            type: string
          description: App version from header
        - in: header
          name: X-Platform
          schema:
            type: string
          description: Platform from header
      responses:
        '200':
          description: Session provided successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "SESSION_PROVIDED_SUCCESS"
                  data:
                    type: object
                    properties:
                      session:
                        $ref: '#/components/schemas/EnhancedGameSession'
                      sync_version:
                        type: integer
                      device_specific_data:
                        type: object
                        properties:
                          device_type:
                            type: string
                          optimizations:
                            type: object
                          recommended_sync_interval:
                            type: integer
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /api/games/sessions/{session_id}/conflicts/resolve:
    post:
      tags:
        - Game Sessions
      summary: Resolve sync conflicts (GOO-9)
      description: Manually resolve synchronization conflicts between devices
      security:
        - JWTAuth: []
      parameters:
        - in: path
          name: session_id
          required: true
          schema:
            type: string
          description: Session ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                device_state:
                  type: object
                  description: Device state to resolve conflict with
                resolution_strategy:
                  type: string
                  enum: [server_wins, device_wins, merge]
                  default: server_wins
                  description: Strategy for conflict resolution
              required:
                - device_state
      responses:
        '200':
          description: Conflict resolved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "SYNC_CONFLICT_RESOLVED"
                  data:
                    type: object
                    properties:
                      session:
                        $ref: '#/components/schemas/EnhancedGameSession'
                      resolution:
                        type: string
                        enum: [server_wins, device_wins, merge]
                      merge_summary:
                        type: object
                        description: Summary of merge operations (only for merge strategy)
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /api/games/sessions/conflicts:
    get:
      tags:
        - Game Sessions
      summary: Check session conflicts (GOO-9)
      description: Check for sessions with potential synchronization conflicts
      security:
        - JWTAuth: []
      responses:
        '200':
          description: Conflicts check completed
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    enum:
                      - "NO_SYNC_CONFLICTS"
                      - "SYNC_CONFLICTS_DETECTED"
                  data:
                    type: object
                    properties:
                      conflicts_count:
                        type: integer
                        description: Number of sessions with conflicts
                      conflicts:
                        type: array
                        items:
                          type: object
                          properties:
                            session_id:
                              type: string
                            game_id:
                              type: string
                            last_sync_minutes_ago:
                              type: integer
                            device_info:
                              type: object
                            status:
                              type: string
                      total_active_sessions:
                        type: integer
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /api/games/sessions/active:
    get:
      tags:
        - Game Sessions
      summary: Get active sessions (GOO-9)
      description: Get all active and paused sessions for the current user
      security:
        - JWTAuth: []
      responses:
        '200':
          description: Active sessions retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "ACTIVE_SESSIONS_RETRIEVED_SUCCESS"
                  data:
                    type: object
                    properties:
                      active_sessions:
                        type: array
                        items:
                          $ref: '#/components/schemas/EnhancedGameSession'
                      paused_sessions:
                        type: array
                        items:
                          $ref: '#/components/schemas/EnhancedGameSession'
                      all_sessions:
                        type: array
                        items:
                          $ref: '#/components/schemas/EnhancedGameSession'
                      total_count:
                        type: integer
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'

  # ===========================
  # GOO-10: Game Engine Universal Scoring & Tournament System
  # ===========================

  # Game Modes Endpoints
  /api/modes:
    get:
      tags:
        - Game Modes
      summary: Get available game modes
      description: Get all currently available game modes including normal, seasonal wars, and special events
      security:
        - JWTAuth: []
      responses:
        '200':
          description: Available modes retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "AVAILABLE_MODES_RETRIEVED_SUCCESS"
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/GameMode'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /api/modes/current:
    get:
      tags:
        - Game Modes
      summary: Get current active mode
      description: Get the currently active game mode
      security:
        - JWTAuth: []
      responses:
        '200':
          description: Current mode retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "CURRENT_MODE_RETRIEVED_SUCCESS"
                  data:
                    $ref: '#/components/schemas/GameMode'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /api/modes/admin/create:
    post:
      tags:
        - Game Modes
        - Admin
      summary: Create new game mode (Admin)
      description: Create a new seasonal war or special event mode
      security:
        - JWTAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                mode_type:
                  type: string
                  enum: [seasonal_war, special_event]
                  example: "seasonal_war"
                name:
                  type: string
                  example: "Summer Championship"
                start_date:
                  type: string
                  format: date-time
                  example: "2024-06-01T00:00:00Z"
                end_date:
                  type: string
                  format: date-time
                  example: "2024-08-31T23:59:59Z"
                description:
                  type: string
                  example: "Summer tournament with special rewards"
              required:
                - mode_type
                - name
                - start_date
                - end_date
      responses:
        '201':
          description: Game mode created successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "GAME_MODE_CREATED_SUCCESS"
                  data:
                    $ref: '#/components/schemas/GameMode'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /api/modes/admin/{mode_id}/activate:
    post:
      tags:
        - Game Modes
        - Admin
      summary: Activate game mode (Admin)
      description: Activate a specific game mode
      security:
        - JWTAuth: []
      parameters:
        - name: mode_id
          in: path
          required: true
          schema:
            type: string
          example: "seasonal_war_summer_2024"
      responses:
        '200':
          description: Game mode activated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "GAME_MODE_ACTIVATED_SUCCESS"
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'

  # Challenges Endpoints
  /api/challenges:
    get:
      tags:
        - Challenges
      summary: Get user challenges
      description: Get challenges for the current user
      security:
        - JWTAuth: []
      parameters:
        - name: status
          in: query
          schema:
            type: string
            enum: [pending, active, completed, cancelled]
          description: Filter by challenge status
        - name: limit
          in: query
          schema:
            type: integer
            default: 10
          description: Number of challenges to return
      responses:
        '200':
          description: Challenges retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "USER_CHALLENGES_RETRIEVED_SUCCESS"
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Challenge'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'

    post:
      tags:
        - Challenges
      summary: Create challenge
      description: Create a new 1v1, NvN, or cross-game challenge
      security:
        - JWTAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              oneOf:
                - $ref: '#/components/schemas/Create1v1ChallengeRequest'
                - $ref: '#/components/schemas/CreateNvNChallengeRequest'
                - $ref: '#/components/schemas/CreateCrossGameChallengeRequest'
      responses:
        '201':
          description: Challenge created successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "CHALLENGE_CREATED_SUCCESS"
                  data:
                    $ref: '#/components/schemas/Challenge'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /api/challenges/{challenge_id}:
    get:
      tags:
        - Challenges
      summary: Get challenge details
      description: Get detailed information about a specific challenge
      security:
        - JWTAuth: []
      parameters:
        - name: challenge_id
          in: path
          required: true
          schema:
            type: string
          example: "challenge_123"
      responses:
        '200':
          description: Challenge details retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "CHALLENGE_DETAILS_RETRIEVED_SUCCESS"
                  data:
                    $ref: '#/components/schemas/Challenge'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /api/challenges/{challenge_id}/join:
    post:
      tags:
        - Challenges
      summary: Join challenge
      description: Join an open NvN challenge
      security:
        - JWTAuth: []
      parameters:
        - name: challenge_id
          in: path
          required: true
          schema:
            type: string
          example: "challenge_123"
      responses:
        '200':
          description: Successfully joined challenge
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "CHALLENGE_JOINED_SUCCESS"
        '400':
          description: Cannot join challenge
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              examples:
                challenge_full:
                  value:
                    success: false
                    message: "CHALLENGE_FULL"
                already_participant:
                  value:
                    success: false
                    message: "ALREADY_PARTICIPANT"
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /api/challenges/{challenge_id}/start:
    post:
      tags:
        - Challenges
      summary: Start challenge
      description: Start a challenge (creator only)
      security:
        - JWTAuth: []
      parameters:
        - name: challenge_id
          in: path
          required: true
          schema:
            type: string
          example: "challenge_123"
      responses:
        '200':
          description: Challenge started successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "CHALLENGE_STARTED_SUCCESS"
        '400':
          description: Cannot start challenge
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              examples:
                not_creator:
                  value:
                    success: false
                    message: "ONLY_CREATOR_CAN_START"
                already_active:
                  value:
                    success: false
                    message: "CHALLENGE_ALREADY_ACTIVE"
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /api/challenges/{challenge_id}/complete:
    post:
      tags:
        - Challenges
      summary: Complete challenge
      description: Submit final results for a challenge
      security:
        - JWTAuth: []
      parameters:
        - name: challenge_id
          in: path
          required: true
          schema:
            type: string
          example: "challenge_123"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                results:
                  type: object
                  additionalProperties:
                    type: object
                    properties:
                      score:
                        type: number
                        example: 1250.5
                      position:
                        type: integer
                        example: 1
                      completion_time:
                        type: number
                        example: 300.5
                  example:
                    user1: {score: 1250.5, position: 1, completion_time: 300.5}
                    user2: {score: 980.2, position: 2, completion_time: 350.2}
              required:
                - results
      responses:
        '200':
          description: Challenge completed successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "CHALLENGE_COMPLETED_SUCCESS"
                  data:
                    type: object
                    properties:
                      winner_id:
                        type: string
                        example: "user1"
                      final_results:
                        type: object
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /api/challenges/matchmaking:
    post:
      tags:
        - Challenges
      summary: Find automatic match
      description: Find an opponent automatically for 1v1 challenge
      security:
        - JWTAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                game_id:
                  type: string
                  example: "tetris"
                difficulty:
                  type: string
                  enum: [easy, medium, hard]
                  example: "medium"
                max_skill_gap:
                  type: integer
                  example: 200
                  description: Maximum ELO rating difference
              required:
                - game_id
                - difficulty
      responses:
        '200':
          description: Match found successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "MATCH_FOUND_SUCCESS"
                  data:
                    type: object
                    properties:
                      opponent_id:
                        type: string
                        example: "user123"
                      opponent_username:
                        type: string
                        example: "player2"
                      skill_rating:
                        type: integer
                        example: 1250
                      compatibility_score:
                        type: number
                        example: 0.85
        '404':
          description: No suitable opponents found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              example:
                success: false
                message: "NO_OPPONENTS_FOUND"
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'

  # Teams Endpoints
  /api/teams:
    get:
      tags:
        - Teams
      summary: Get all teams
      description: Get all global teams with optional filtering
      parameters:
        - name: active_only
          in: query
          schema:
            type: boolean
            default: true
          description: Return only active teams
      responses:
        '200':
          description: Teams retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "TEAMS_RETRIEVED_SUCCESS"
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/GlobalTeam'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /api/teams/leaderboard:
    get:
      tags:
        - Teams
      summary: Get team leaderboard
      description: Get teams ranked by total score
      parameters:
        - name: limit
          in: query
          schema:
            type: integer
            default: 10
          description: Number of teams to return
      responses:
        '200':
          description: Team leaderboard retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "TEAM_LEADERBOARD_RETRIEVED_SUCCESS"
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/GlobalTeam'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /api/teams/my-team:
    get:
      tags:
        - Teams
      summary: Get user's team
      description: Get the current user's team information
      security:
        - JWTAuth: []
      responses:
        '200':
          description: User team retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "USER_TEAM_RETRIEVED_SUCCESS"
                  data:
                    $ref: '#/components/schemas/GlobalTeam'
        '404':
          description: User not assigned to any team
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              example:
                success: false
                message: "USER_NOT_IN_TEAM"
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /api/teams/join:
    post:
      tags:
        - Teams
      summary: Join team
      description: Join a team (auto-assignment or specific team)
      security:
        - JWTAuth: []
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                team_id:
                  type: string
                  description: Specific team to join (optional - auto-assign if not provided)
                  example: "fire_dragons"
      responses:
        '200':
          description: Successfully joined team
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "TEAM_JOINED_SUCCESS"
                  data:
                    type: object
                    properties:
                      team_id:
                        type: string
                        example: "fire_dragons"
                      team_name:
                        type: string
                        example: "Fire Dragons"
        '400':
          description: Cannot join team
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              examples:
                already_in_team:
                  value:
                    success: false
                    message: "ALREADY_IN_TEAM"
                team_not_found:
                  value:
                    success: false
                    message: "TEAM_NOT_FOUND"
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /api/teams/leave:
    post:
      tags:
        - Teams
      summary: Leave team
      description: Leave current team
      security:
        - JWTAuth: []
      responses:
        '200':
          description: Successfully left team
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "TEAM_LEFT_SUCCESS"
        '400':
          description: Cannot leave team
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              example:
                success: false
                message: "NOT_IN_TEAM"
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /api/teams/{team_id}/members:
    get:
      tags:
        - Teams
      summary: Get team members
      description: Get list of team members
      parameters:
        - name: team_id
          in: path
          required: true
          schema:
            type: string
          example: "fire_dragons"
      responses:
        '200':
          description: Team members retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "TEAM_MEMBERS_RETRIEVED_SUCCESS"
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/TeamMember'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /api/teams/record-contribution:
    post:
      tags:
        - Teams
      summary: Record game contribution
      description: Record a game score contribution for the user's team
      security:
        - JWTAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                score:
                  type: number
                  description: Normalized game score
                  example: 150.5
                game_type:
                  type: string
                  enum: [individual, team, challenge]
                  default: individual
                  example: "individual"
                session_id:
                  type: string
                  description: Game session ID for reference
                  example: "session_123"
              required:
                - score
      responses:
        '200':
          description: Contribution recorded successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "CONTRIBUTION_RECORDED_SUCCESS"
                  data:
                    type: object
                    properties:
                      contribution_points:
                        type: number
                        example: 125.5
                      team_total_score:
                        type: number
                        example: 15250.5
        '400':
          description: Cannot record contribution
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              examples:
                not_in_team:
                  value:
                    success: false
                    message: "USER_NOT_IN_TEAM"
                score_required:
                  value:
                    success: false
                    message: "SCORE_REQUIRED"
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '500':
          $ref: '#/components/responses/InternalServerError'

  # Tournament Endpoints
  /api/teams/tournament/current:
    get:
      tags:
        - Tournaments
      summary: Get current tournament
      description: Get the currently active tournament
      responses:
        '200':
          description: Current tournament retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "CURRENT_TOURNAMENT_RETRIEVED_SUCCESS"
                  data:
                    $ref: '#/components/schemas/Tournament'
        '404':
          description: No active tournament
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              example:
                success: false
                message: "NO_ACTIVE_TOURNAMENT"
        '500':
          $ref: '#/components/responses/InternalServerError'

  /api/teams/tournament/{tournament_id}/leaderboard:
    get:
      tags:
        - Tournaments
      summary: Get tournament leaderboard
      description: Get tournament teams leaderboard
      parameters:
        - name: tournament_id
          in: path
          required: true
          schema:
            type: string
          example: "tournament_summer_2024"
      responses:
        '200':
          description: Tournament leaderboard retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "TOURNAMENT_LEADERBOARD_RETRIEVED_SUCCESS"
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        team_id:
                          type: string
                          example: "fire_dragons"
                        team_name:
                          type: string
                          example: "Fire Dragons"
                        total_score:
                          type: number
                          example: 25450.5
                        position:
                          type: integer
                          example: 1
                        member_count:
                          type: integer
                          example: 125
                        avg_score_per_member:
                          type: number
                          example: 203.6
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'

  # Admin Tournament Endpoints
  /api/teams/admin/initialize:
    post:
      tags:
        - Teams
        - Admin
      summary: Initialize default teams (Admin)
      description: Create the default global teams
      security:
        - JWTAuth: []
      responses:
        '201':
          description: Teams initialized successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "TEAMS_INITIALIZED_SUCCESS"
                  data:
                    type: object
                    properties:
                      teams_created:
                        type: integer
                        example: 4
                      team_names:
                        type: array
                        items:
                          type: string
                        example: ["Fire Dragons", "Ice Phoenix", "Earth Guardians", "Storm Eagles"]
        '400':
          description: Teams already initialized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              example:
                success: false
                message: "TEAMS_ALREADY_INITIALIZED"
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /api/teams/admin/tournament:
    post:
      tags:
        - Tournaments
        - Admin
      summary: Create tournament (Admin)
      description: Create a new team tournament
      security:
        - JWTAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                tournament_type:
                  type: string
                  enum: [seasonal_war, monthly_battle, special_event]
                  example: "seasonal_war"
                name:
                  type: string
                  example: "Summer War 2024"
                duration_days:
                  type: integer
                  example: 30
                team_ids:
                  type: array
                  items:
                    type: string
                  example: ["fire_dragons", "ice_phoenix", "earth_guardians", "storm_eagles"]
                description:
                  type: string
                  example: "Epic summer tournament with exclusive rewards"
              required:
                - tournament_type
                - name
                - duration_days
      responses:
        '201':
          description: Tournament created successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "TOURNAMENT_CREATED_SUCCESS"
                  data:
                    $ref: '#/components/schemas/Tournament'
        '400':
          $ref: '#/components/responses/BadRequestError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /api/teams/admin/tournament/{tournament_id}/start:
    post:
      tags:
        - Tournaments
        - Admin
      summary: Start tournament (Admin)
      description: Start a created tournament
      security:
        - JWTAuth: []
      parameters:
        - name: tournament_id
          in: path
          required: true
          schema:
            type: string
          example: "tournament_summer_2024"
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                auto_assign_users:
                  type: boolean
                  default: true
                  description: Automatically balance users across teams
                  example: true
      responses:
        '200':
          description: Tournament started successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "TOURNAMENT_STARTED_SUCCESS"
                  data:
                    type: object
                    properties:
                      tournament_id:
                        type: string
                        example: "tournament_summer_2024"
                      started_at:
                        type: string
                        format: date-time
                        example: "2024-06-01T00:00:00Z"
                      end_date:
                        type: string
                        format: date-time
                        example: "2024-06-30T23:59:59Z"
                      users_balanced:
                        type: integer
                        example: 150
        '400':
          description: Cannot start tournament
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              examples:
                already_active:
                  value:
                    success: false
                    message: "TOURNAMENT_ALREADY_ACTIVE"
                invalid_status:
                  value:
                    success: false
                    message: "TOURNAMENT_INVALID_STATUS"
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '500':
          $ref: '#/components/responses/InternalServerError'


components:
  securitySchemes:
    JWTAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: JWT Access Token
    JWTRefreshAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: JWT Refresh Token

  responses:
    SuccessResponse:
      description: Operation successful
      content:
        application/json:
          schema:
            type: object
            properties:
              success:
                type: boolean
                example: true
              message:
                type: string
                example: "Operation completed successfully"

    BadRequestError:
      description: Bad request - validation error or invalid input
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'

    UnauthorizedError:
      description: Authentication required or invalid token
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'

    ForbiddenError:
      description: Access forbidden - insufficient permissions
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'

    NotFoundError:
      description: Resource not found
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'

    InternalServerError:
      description: Internal server error
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'

  schemas:
    User:
      type: object
      properties:
        _id:
          type: string
          description: User unique identifier
          example: "507f1f77bcf86cd799439011"
        email:
          type: string
          format: email
          description: User email address
          example: "user@example.com"
        first_name:
          type: string
          description: User first name
          nullable: true
          example: "John"
        last_name:
          type: string
          description: User last name
          nullable: true
          example: "Doe"
        is_active:
          type: boolean
          description: Whether the user account is active
          example: true
        role:
          type: string
          description: User role
          example: "user"
        created_at:
          type: string
          format: date-time
          description: Account creation timestamp
          example: "2024-01-15T10:30:00Z"
        updated_at:
          type: string
          format: date-time
          description: Last update timestamp
          example: "2024-01-15T10:30:00Z"

    RegisterRequest:
      type: object
      required:
        - email
        - password
      properties:
        email:
          type: string
          format: email
          description: User email address
          example: "user@example.com"
        password:
          type: string
          minLength: 6
          description: User password (minimum 6 characters)
          example: "securepassword123"
        first_name:
          type: string
          description: User first name (optional)
          example: "John"
        last_name:
          type: string
          description: User last name (optional)
          example: "Doe"

    LoginRequest:
      type: object
      required:
        - email
        - password
      properties:
        email:
          type: string
          format: email
          description: User email address
          example: "user@example.com"
        password:
          type: string
          description: User password
          example: "securepassword123"

    UpdateProfileRequest:
      type: object
      properties:
        first_name:
          type: string
          description: User first name (optional)
          example: "John"
        last_name:
          type: string
          description: User last name (optional)
          example: "Smith"

    AuthResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        message:
          type: string
          example: "Registration completed successfully"
        data:
          type: object
          properties:
            user:
              $ref: '#/components/schemas/User'
            tokens:
              type: object
              properties:
                access_token:
                  type: string
                  description: JWT access token
                  example: "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9..."
                refresh_token:
                  type: string
                  description: JWT refresh token
                  example: "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9..."
                token_type:
                  type: string
                  example: "Bearer"

    ErrorResponse:
      type: object
      properties:
        success:
          type: boolean
          example: false
        message:
          type: string
          description: Error message
          example: "Invalid credentials"
        data:
          type: object
          description: Optional additional error data
          nullable: true

    HealthResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        message:
          type: string
          example: "API is running"
        status:
          type: string
          example: "healthy"


    Friend:
      type: object
      properties:
        id:
          type: string
          example: "507f1f77bcf86cd799439012"
        display_name:
          type: string
          example: "JohnDoe123"
        first_name:
          type: string
          example: "John"
        last_name:
          type: string
          example: "Doe"
        impact_score:
          type: integer
          example: 1250
        gaming_stats:
          type: object
          properties:
            total_play_time:
              type: integer
              example: 3600
            favorite_category:
              type: string
              example: "puzzle"
        friendship_date:
          type: string
          format: date-time
          example: "2024-01-15T10:30:00Z"
        is_active:
          type: boolean
          example: true

    FriendRequest:
      type: object
      properties:
        id:
          type: string
          example: "507f1f77bcf86cd799439013"
        user_id:
          type: string
          example: "507f1f77bcf86cd799439012"
        display_name:
          type: string
          example: "JaneDoe456"
        first_name:
          type: string
          example: "Jane"
        last_name:
          type: string
          example: "Doe"
        impact_score:
          type: integer
          example: 950
        created_at:
          type: string
          format: date-time
          example: "2024-01-20T08:15:00Z"
        status:
          type: string
          enum: [pending, accepted, declined]
          example: "pending"
        type:
          type: string
          enum: [received, sent]
          example: "received"

    SearchUser:
      type: object
      properties:
        id:
          type: string
          example: "507f1f77bcf86cd799439012"
        display_name:
          type: string
          example: "AliceWonder789"
        first_name:
          type: string
          example: "Alice"
        last_name:
          type: string
          example: "Wonder"
        email:
          type: string
          example: "alice.wonder@example.com"
        impact_score:
          type: integer
          example: 2100
        gaming_stats:
          type: object
          properties:
            total_play_time:
              type: integer
              example: 7200
            favorite_category:
              type: string
              example: "strategy"
        friends_count:
          type: integer
          example: 15
        relationship:
          $ref: '#/components/schemas/RelationshipStatus'
        privacy_level:
          type: string
          enum: [public, friends, private]
          example: "public"

    UserSuggestion:
      type: object
      properties:
        id:
          type: string
          example: "507f1f77bcf86cd799439012"
        display_name:
          type: string
          example: "BobBuilder321"
        first_name:
          type: string
          example: "Bob"
        last_name:
          type: string
          example: "Builder"
        impact_score:
          type: integer
          example: 1800
        gaming_stats:
          type: object
          properties:
            total_play_time:
              type: integer
              example: 5400
            favorite_category:
              type: string
              example: "puzzle"
        friends_count:
          type: integer
          example: 22
        relationship:
          $ref: '#/components/schemas/RelationshipStatus'
        privacy_level:
          type: string
          enum: [public, friends, private]
          example: "public"

    BlockedUser:
      type: object
      properties:
        id:
          type: string
          example: "507f1f77bcf86cd799439015"
        display_name:
          type: string
          example: "SpamUser123"
        first_name:
          type: string
          example: "Spam"
        last_name:
          type: string
          example: "User"
        blocked_at:
          type: string
          format: date-time
          example: "2024-01-18T14:20:00Z"

    RelationshipStatus:
      type: object
      properties:
        type:
          type: string
          enum: [friend, following, blocked, null]
          example: "friend"
          nullable: true
        status:
          type: string
          enum: [pending, accepted, declined, null]
          example: "accepted"
          nullable: true
        is_friend:
          type: boolean
          example: true
        is_pending:
          type: boolean
          example: false
        is_blocked:
          type: boolean
          example: false
        initiated_by_me:
          type: boolean
          example: false

    SocialStats:
      type: object
      properties:
        friends_count:
          type: integer
          example: 45
        pending_requests_count:
          type: integer
          example: 3
        sent_requests_count:
          type: integer
          example: 1
        blocked_users_count:
          type: integer
          example: 2



    Wallet:
      type: object
      properties:
        current_balance:
          type: number
          format: float
          description: Current balance in euros
          example: 12.50
        total_earned:
          type: number
          format: float
          description: Total credits earned all time
          example: 45.75
        total_donated:
          type: number
          format: float
          description: Total amount donated
          example: 33.25
        pending_credits:
          type: number
          format: float
          description: Credits being processed
          example: 2.50
        last_transaction:
          type: string
          format: date-time
          example: "2024-01-15T10:30:00Z"

    WalletTransaction:
      type: object
      properties:
        transaction_id:
          type: string
          example: "txn_123abc456def"
        transaction_type:
          type: string
          enum: [credit_earned, donation, bonus, refund]
          example: "credit_earned"
        amount:
          type: number
          format: float
          description: Amount in euros
          example: 0.25
        description:
          type: string
          example: "Credits earned from 15-minute gaming session"
        game_session_id:
          type: string
          nullable: true
          example: "sess_123abc456def"
        status:
          type: string
          enum: [pending, completed, failed]
          example: "completed"
        created_at:
          type: string
          format: date-time
          example: "2024-01-15T10:30:00Z"

    DonationRequest:
      type: object
      required:
        - onlus_id
        - amount
      properties:
        onlus_id:
          type: string
          example: "507f1f77bcf86cd799439013"
        amount:
          type: number
          format: float
          minimum: 0.01
          description: Donation amount in euros
          example: 5.00
        donation_type:
          type: string
          enum: [instant, scheduled, challenge]
          default: instant
          example: "instant"
        message:
          type: string
          description: Optional message to ONLUS
          example: "Keep up the great work!"

    Donation:
      type: object
      properties:
        donation_id:
          type: string
          example: "don_123abc456def"
        user_id:
          type: string
          example: "507f1f77bcf86cd799439011"
        onlus_id:
          type: string
          example: "507f1f77bcf86cd799439013"
        onlus_name:
          type: string
          example: "Education for All Foundation"
        amount:
          type: number
          format: float
          example: 5.00
        processing_fee:
          type: number
          format: float
          example: 0.15
        net_donation:
          type: number
          format: float
          example: 4.85
        status:
          type: string
          enum: [pending, processing, completed, failed]
          example: "completed"
        donation_type:
          type: string
          example: "instant"
        created_at:
          type: string
          format: date-time
          example: "2024-01-15T10:30:00Z"
        processed_at:
          type: string
          format: date-time
          nullable: true
          example: "2024-01-15T10:31:00Z"

    ONLUS:
      type: object
      properties:
        onlus_id:
          type: string
          example: "507f1f77bcf86cd799439013"
        display_name:
          type: string
          example: "Education for All Foundation"
        description:
          type: string
          example: "Providing quality education to underserved communities worldwide"
        category:
          type: string
          enum: [health, education, environment, social, humanitarian, arts, animal_welfare]
          example: "education"
        logo_url:
          type: string
          nullable: true
          example: "https://cdn.goodplay.com/onlus/logos/edu-foundation.png"
        rating:
          type: number
          format: float
          minimum: 0
          maximum: 5
          example: 4.7
        total_received:
          type: number
          format: float
          description: Total donations received through platform
          example: 12450.75
        donor_count:
          type: integer
          description: Number of unique donors
          example: 342
        verification_status:
          type: string
          enum: [verified, pending, rejected]
          example: "verified"

    ONLUSDetail:
      allOf:
        - $ref: '#/components/schemas/ONLUS'
        - type: object
          properties:
            legal_name:
              type: string
              example: "Education for All Foundation Inc."
            mission_statement:
              type: string
              example: "Our mission is to provide quality education access to underserved communities through innovative programs and sustainable partnerships."
            website:
              type: string
              nullable: true
              example: "https://educationforall.org"
            contact_info:
              type: object
              properties:
                email:
                  type: string
                  example: "contact@educationforall.org"
                phone:
                  type: string
                  example: "+1-555-0123"
            active_projects:
              type: array
              items:
                type: object
                properties:
                  project_id:
                    type: string
                    example: "proj_123abc"
                  title:
                    type: string
                    example: "Digital Learning Initiative"
                  target_amount:
                    type: number
                    format: float
                    example: 25000.00
                  current_amount:
                    type: number
                    format: float
                    example: 18750.50
                  progress_percentage:
                    type: number
                    format: float
                    example: 75.0

    UserImpactSummary:
      type: object
      properties:
        impact_score:
          type: integer
          description: Overall impact score
          example: 1250
        total_donated:
          type: number
          format: float
          description: Total amount donated in euros
          example: 125.50
        donations_count:
          type: integer
          description: Total number of donations made
          example: 25
        onlus_supported:
          type: integer
          description: Number of different ONLUS supported
          example: 8
        lives_impacted:
          type: integer
          description: Estimated number of lives impacted
          example: 42
        impact_categories:
          type: array
          items:
            type: object
            properties:
              category:
                type: string
                example: "education"
              amount_donated:
                type: number
                format: float
                example: 75.50
              percentage:
                type: number
                format: float
                example: 60.0
        recent_impact:
          type: array
          items:
            type: object
            properties:
              onlus_name:
                type: string
                example: "Education for All Foundation"
              donation_amount:
                type: number
                format: float
                example: 10.00
              impact_description:
                type: string
                example: "Provided school supplies for 2 students"
              date:
                type: string
                format: date-time
                example: "2024-01-15T10:30:00Z"

    # Extended User Schemas for GOO-5
    ExtendedUser:
      type: object
      allOf:
        - $ref: '#/components/schemas/User'
        - type: object
          properties:
            gaming_stats:
              $ref: '#/components/schemas/GamingStats'
            impact_score:
              type: number
              description: User's social impact score
              example: 85
            preferences:
              $ref: '#/components/schemas/UserPreferences'
            social_profile:
              $ref: '#/components/schemas/SocialProfile'
            wallet_credits:
              $ref: '#/components/schemas/WalletCredits'

    GamingStats:
      type: object
      properties:
        total_play_time:
          type: number
          description: Total minutes played across all games
          example: 1250
        games_played:
          type: number
          description: Number of different games played
          example: 5
        favorite_category:
          type: string
          description: Most played game category
          nullable: true
          example: "puzzle"
        last_activity:
          type: string
          format: date-time
          description: Last gaming activity timestamp
          nullable: true
          example: "2024-01-15T10:30:00Z"


    SocialProfile:
      type: object
      properties:
        display_name:
          type: string
          description: Public display name
          example: "SuperGamer2025"
        privacy_level:
          type: string
          enum: ["public", "friends", "private"]
          description: Profile privacy level
          example: "public"
        friends_count:
          type: number
          description: Number of friends
          example: 15

    WalletCredits:
      type: object
      properties:
        current_balance:
          type: number
          format: float
          description: Current available credits
          example: 45.75
        total_earned:
          type: number
          format: float
          description: Total credits earned through gaming
          example: 120.50
        total_donated:
          type: number
          format: float
          description: Total credits donated to ONLUS
          example: 74.75

    # Request Schemas for User Management
    ExtendedUpdateProfileRequest:
      type: object
      properties:
        first_name:
          type: string
          description: User first name
          example: "Gaming"
        last_name:
          type: string
          description: User last name
          example: "Master"
        preferences:
          $ref: '#/components/schemas/PreferencesUpdate'
        social_profile:
          $ref: '#/components/schemas/SocialProfileUpdate'

    PreferencesUpdate:
      type: object
      properties:
        notification_enabled:
          type: boolean
          description: Enable push notifications
          example: true
        preferred_game_categories:
          type: array
          items:
            type: string
          description: List of preferred game categories
          example: ["puzzle", "strategy"]
        donation_frequency:
          type: string
          enum: ["daily", "weekly", "monthly", "never"]
          description: Preferred donation frequency
          example: "weekly"

    SocialProfileUpdate:
      type: object
      properties:
        display_name:
          type: string
          minLength: 2
          maxLength: 50
          description: Public display name
          example: "SuperGamer2025"
        privacy_level:
          type: string
          enum: ["public", "friends", "private"]
          description: Profile privacy level
          example: "public"

    GamingStatsUpdate:
      type: object
      properties:
        play_time:
          type: number
          minimum: 0
          description: Minutes played in this session
          example: 45
        game_category:
          type: string
          description: Category of the game played
          example: "puzzle"

    AddCreditsRequest:
      type: object
      required:
        - amount
      properties:
        amount:
          type: number
          format: float
          minimum: 0.01
          description: Amount of credits to add
          example: 25.5
        transaction_type:
          type: string
          enum: ["earned", "bonus", "refund"]
          description: Type of credit transaction
          example: "earned"

    DonateCreditsRequest:
      type: object
      required:
        - amount
      properties:
        amount:
          type: number
          format: float
          minimum: 0.01
          description: Amount of credits to donate
          example: 10.0
        onlus_id:
          type: string
          description: ID of the ONLUS organization to donate to
          example: "example_onlus_id"

    # User Preferences Schemas (embedded in User document)
    UserPreferences:
      type: object
      description: User preferences embedded in User document
      properties:
        gaming:
          $ref: '#/components/schemas/GamingPreferences'
        notifications:
          $ref: '#/components/schemas/NotificationPreferences'
        privacy:
          $ref: '#/components/schemas/PrivacyPreferences'
        donations:
          $ref: '#/components/schemas/DonationPreferences'

    GamingPreferences:
      type: object
      properties:
        preferred_categories:
          type: array
          items:
            type: string
          description: Preferred game categories
          example: ["puzzle", "strategy", "action"]
        difficulty_level:
          type: string
          enum: ["easy", "medium", "hard"]
          description: Preferred difficulty level
          example: "medium"
        tutorial_enabled:
          type: boolean
          description: Show tutorials for new games
          example: true
        auto_save:
          type: boolean
          description: Auto-save game progress
          example: true
        sound_enabled:
          type: boolean
          description: Enable game sounds
          example: true
        music_enabled:
          type: boolean
          description: Enable background music
          example: true
        vibration_enabled:
          type: boolean
          description: Enable device vibration
          example: true

    NotificationPreferences:
      type: object
      properties:
        push_enabled:
          type: boolean
          description: Enable push notifications
          example: true
        email_enabled:
          type: boolean
          description: Enable email notifications
          example: true
        frequency:
          type: string
          enum: ["none", "daily", "weekly", "monthly"]
          description: Notification frequency
          example: "daily"
        achievement_alerts:
          type: boolean
          description: Alert on achievement unlocks
          example: true
        donation_confirmations:
          type: boolean
          description: Confirm successful donations
          example: true
        friend_activity:
          type: boolean
          description: Notify about friend activity
          example: true
        tournament_reminders:
          type: boolean
          description: Remind about tournaments
          example: true
        maintenance_alerts:
          type: boolean
          description: Notify about maintenance
          example: true

    PrivacyPreferences:
      type: object
      properties:
        profile_visibility:
          type: string
          enum: ["public", "friends", "private"]
          description: Profile visibility level
          example: "public"
        stats_sharing:
          type: boolean
          description: Share gaming statistics
          example: true
        friends_discovery:
          type: boolean
          description: Allow discovery by friends
          example: true
        leaderboard_participation:
          type: boolean
          description: Participate in leaderboards
          example: true
        activity_visibility:
          type: string
          enum: ["public", "friends", "private"]
          description: Activity visibility level
          example: "friends"
        contact_permissions:
          type: string
          enum: ["everyone", "friends", "none"]
          description: Who can contact you
          example: "friends"

    DonationPreferences:
      type: object
      properties:
        auto_donate_enabled:
          type: boolean
          description: Enable automatic donations
          example: false
        auto_donate_percentage:
          type: number
          minimum: 0
          maximum: 100
          description: Percentage of earned credits to auto-donate
          example: 10
        preferred_causes:
          type: array
          items:
            type: string
          description: Preferred donation causes
          example: ["education", "health", "environment"]
        notification_threshold:
          type: number
          minimum: 0
          description: Notify when credits reach this amount
          example: 50
        monthly_goal:
          type: number
          minimum: 0
          nullable: true
          description: Optional monthly donation goal
          example: 100
        impact_sharing:
          type: boolean
          description: Share impact statistics
          example: true

    DefaultPreferences:
      type: object
      properties:
        gaming:
          $ref: '#/components/schemas/GamingPreferences'
        notifications:
          $ref: '#/components/schemas/NotificationPreferences'
        privacy:
          $ref: '#/components/schemas/PrivacyPreferences'
        donations:
          $ref: '#/components/schemas/DonationPreferences'

    PreferencesUpdateRequest:
      type: object
      properties:
        gaming:
          $ref: '#/components/schemas/GamingPreferences'
        notifications:
          $ref: '#/components/schemas/NotificationPreferences'
        privacy:
          $ref: '#/components/schemas/PrivacyPreferences'
        donations:
          $ref: '#/components/schemas/DonationPreferences'
      description: Update request can contain any combination of preference categories

    # Game Engine Schemas
    Game:
      type: object
      properties:
        id:
          type: string
          description: Game unique identifier
          example: "507f1f77bcf86cd799439011"
        name:
          type: string
          description: Game name
          example: "Number Guessing Game"
        description:
          type: string
          description: Game description
          example: "A simple number guessing game where players try to guess a randomly generated number"
        category:
          type: string
          description: Game category
          example: "puzzle"
        version:
          type: string
          description: Game version
          example: "1.0.0"
        is_active:
          type: boolean
          description: Whether the game is active
          example: true
        credit_rate:
          type: number
          description: Credits earned per minute of gameplay
          example: 1.5
        author:
          type: string
          description: Game author
          example: "GoodPlay Team"
        plugin_id:
          type: string
          description: Associated plugin ID
          example: "number_guessing_game"
        min_players:
          type: integer
          description: Minimum number of players
          example: 1
        max_players:
          type: integer
          description: Maximum number of players
          example: 1
        estimated_duration_minutes:
          type: integer
          description: Estimated game duration in minutes
          example: 5
        difficulty_level:
          type: string
          enum: [easy, medium, hard]
          description: Game difficulty level
          example: "easy"
        requires_internet:
          type: boolean
          description: Whether the game requires internet connection
          example: false
        instructions:
          type: string
          description: Game instructions
          example: "Guess the secret number between 1 and 100!"
        install_count:
          type: integer
          description: Number of times the game has been installed
          example: 150
        rating:
          type: number
          description: Average game rating
          example: 4.5
        total_ratings:
          type: integer
          description: Total number of ratings
          example: 32
        created_at:
          type: string
          format: date-time
          description: Game creation timestamp
          example: "2024-01-15T10:30:00Z"
        updated_at:
          type: string
          format: date-time
          description: Last update timestamp
          example: "2024-01-15T10:30:00Z"

    GameSession:
      type: object
      properties:
        id:
          type: string
          description: Session document ID
          example: "507f1f77bcf86cd799439011"
        session_id:
          type: string
          description: Session unique identifier
          example: "uuid-session-12345"
        user_id:
          type: string
          description: User ID who owns this session
          example: "507f1f77bcf86cd799439012"
        game_id:
          type: string
          description: Game ID for this session
          example: "507f1f77bcf86cd799439013"
        status:
          type: string
          enum: [active, paused, completed, abandoned]
          description: Session status
          example: "active"
        current_state:
          type: object
          description: Current game state (format depends on game)
          example:
            attempts_remaining: 8
            guesses_made: [25, 50]
            hints: ["higher", "lower"]
        score:
          type: integer
          nullable: true
          description: Current session score
          example: 1200
        credits_earned:
          type: integer
          nullable: true
          description: Credits earned in this session
          example: 15
        started_at:
          type: string
          format: date-time
          description: Session start timestamp
          example: "2024-01-15T10:30:00Z"
        ended_at:
          type: string
          format: date-time
          nullable: true
          description: Session end timestamp
          example: "2024-01-15T10:35:00Z"
        session_config:
          type: object
          description: Session configuration
          example:
            difficulty: "medium"
        moves_count:
          type: integer
          description: Number of moves made
          example: 5
        achievements_unlocked:
          type: array
          items:
            type: string
          description: Achievements unlocked in this session
          example: ["QUICK_SOLVER", "GAME_COMPLETED"]
        statistics:
          type: object
          description: Session statistics
          example:
            attempts_used: 3
            completion_time: 180
        duration_seconds:
          type: integer
          nullable: true
          description: Session duration in seconds
          example: 300

    EnhancedGameSession:
      allOf:
        - $ref: '#/components/schemas/GameSession'
        - type: object
          properties:
            play_duration_ms:
              type: integer
              description: Precise play duration in milliseconds
              example: 180000
            play_duration_seconds:
              type: number
              description: Precise play duration in seconds
              example: 180.0
            paused_at:
              type: string
              format: date-time
              nullable: true
              description: When session was paused
              example: "2024-01-15T10:32:00Z"
            resumed_at:
              type: string
              format: date-time
              nullable: true
              description: When session was resumed
              example: "2024-01-15T10:33:00Z"
            device_info:
              type: object
              description: Device information for cross-device sync
              properties:
                device_id:
                  type: string
                  example: "mobile-device-456"
                device_type:
                  type: string
                  enum: [mobile, web, desktop]
                  example: "mobile"
                platform:
                  type: string
                  example: "iOS"
                app_version:
                  type: string
                  example: "1.2.0"
                user_agent:
                  type: string
                  example: "GoodPlay/1.2.0 (iOS)"
            last_sync_at:
              type: string
              format: date-time
              nullable: true
              description: Last synchronization timestamp
              example: "2024-01-15T10:34:00Z"
            sync_version:
              type: integer
              description: Synchronization version for conflict resolution
              example: 3
            created_at:
              type: string
              format: date-time
              description: Session creation timestamp
              example: "2024-01-15T10:30:00Z"
            updated_at:
              type: string
              format: date-time
              description: Session last update timestamp
              example: "2024-01-15T10:34:00Z"

    GameSessionWithGame:
      allOf:
        - $ref: '#/components/schemas/GameSession'
        - type: object
          properties:
            game:
              $ref: '#/components/schemas/Game'

    GameRules:
      type: object
      properties:
        min_players:
          type: integer
          description: Minimum number of players
          example: 1
        max_players:
          type: integer
          description: Maximum number of players
          example: 1
        estimated_duration_minutes:
          type: integer
          description: Estimated game duration in minutes
          example: 5
        difficulty_level:
          type: string
          enum: [easy, medium, hard]
          description: Game difficulty level
          example: "easy"
        requires_internet:
          type: boolean
          description: Whether the game requires internet connection
          example: false
        description:
          type: string
          description: Game rules description
          example: "Guess the secret number between 1 and 100!"
        instructions:
          type: string
          description: Detailed game instructions
          example: "You have 10 attempts to guess the correct number..."

    PluginInfo:
      type: object
      properties:
        name:
          type: string
          description: Plugin name
          example: "Number Guessing Game"
        version:
          type: string
          description: Plugin version
          example: "1.0.0"
        description:
          type: string
          description: Plugin description
          example: "A simple number guessing game"
        category:
          type: string
          description: Plugin category
          example: "puzzle"
        author:
          type: string
          description: Plugin author
          example: "GoodPlay Team"
        credit_rate:
          type: number
          description: Credit rate per minute
          example: 0.5
        is_initialized:
          type: boolean
          description: Whether the plugin is initialized
          example: true

    PluginValidation:
      type: object
      properties:
        game_id:
          type: string
          description: Game ID
          example: "507f1f77bcf86cd799439011"
        plugin_id:
          type: string
          description: Plugin ID
          example: "number_guessing_game"
        validation:
          type: object
          properties:
            is_valid:
              type: boolean
              description: Whether the plugin is valid
              example: true
            errors:
              type: array
              items:
                type: string
              description: Validation errors
              example: []
            warnings:
              type: array
              items:
                type: string
              description: Validation warnings
              example: ["Plugin description is recommended"]
        dependencies:
          type: object
          properties:
            dependencies_met:
              type: boolean
              description: Whether all dependencies are met
              example: true
            missing_dependencies:
              type: array
              items:
                type: string
              description: Missing dependencies
              example: []
            total_dependencies:
              type: integer
              description: Total number of dependencies
              example: 0

    SessionResult:
      type: object
      properties:
        session_id:
          type: string
          description: Session ID
          example: "uuid-session-12345"
        final_score:
          type: integer
          description: Final session score
          example: 1200
        credits_earned:
          type: integer
          description: Credits earned in session
          example: 15
        completion_time_seconds:
          type: integer
          description: Session completion time in seconds
          example: 300
        achievements_unlocked:
          type: array
          items:
            type: string
          description: Achievements unlocked
          example: ["QUICK_SOLVER", "GAME_COMPLETED"]
        statistics:
          type: object
          description: Detailed session statistics
          example:
            attempts_used: 3
            won: true
            target_number: 42

    GameStats:
      type: object
      properties:
        database_stats:
          type: object
          properties:
            total_games:
              type: integer
              description: Total number of games
              example: 25
            active_games:
              type: integer
              description: Number of active games
              example: 20
            inactive_games:
              type: integer
              description: Number of inactive games
              example: 5
            categories:
              type: array
              items:
                type: object
                properties:
                  _id:
                    type: string
                    description: Category name
                    example: "puzzle"
                  count:
                    type: integer
                    description: Number of games in category
                    example: 8
              description: Games by category
            average_rating:
              type: number
              description: Average rating across all games
              example: 4.2
        plugin_stats:
          type: object
          properties:
            total_plugins:
              type: integer
              description: Total number of plugins
              example: 20
            active_plugins:
              type: integer
              description: Number of active plugins
              example: 18
            inactive_plugins:
              type: integer
              description: Number of inactive plugins
              example: 2
            categories:
              type: array
              items:
                type: string
              description: Available plugin categories
              example: ["puzzle", "action", "strategy"]
            category_count:
              type: integer
              description: Number of different categories
              example: 3

    UserSessionStats:
      type: object
      properties:
        total_sessions:
          type: integer
          description: Total number of sessions
          example: 45
        completed_sessions:
          type: integer
          description: Number of completed sessions
          example: 38
        completion_rate:
          type: number
          description: Session completion rate as percentage
          example: 84.4
        total_score:
          type: integer
          description: Total score across all sessions
          example: 15600
        total_credits_earned:
          type: integer
          description: Total credits earned
          example: 450
        stats_by_status:
          type: object
          description: Statistics broken down by session status
          additionalProperties:
            type: object
            properties:
              count:
                type: integer
              total_score:
                type: integer
              total_credits:
                type: integer
          example:
            completed:
              count: 38
              total_score: 15200
              total_credits: 420
            abandoned:
              count: 7
              total_score: 400
              total_credits: 30

    PaginationInfo:
      type: object
      properties:
        current_page:
          type: integer
          description: Current page number
          example: 1
        total_pages:
          type: integer
          description: Total number of pages
          example: 5
        total_count:
          type: integer
          description: Total number of items
          example: 95
        limit:
          type: integer
          description: Items per page
          example: 20
        has_next:
          type: boolean
          description: Whether there is a next page
          example: true
        has_previous:
          type: boolean
          description: Whether there is a previous page
          example: false

    # ===========================
    # GOO-10: New Schemas for Universal Scoring & Tournament System
    # ===========================

    GameMode:
      type: object
      properties:
        mode_id:
          type: string
          description: Unique mode identifier
          example: "seasonal_war_summer_2024"
        name:
          type: string
          description: Display name of the mode
          example: "Summer War 2024"
        mode_type:
          type: string
          enum: [normal, seasonal_war, special_event]
          description: Type of game mode
          example: "seasonal_war"
        is_active:
          type: boolean
          description: Whether the mode is currently active
          example: true
        is_default:
          type: boolean
          description: Whether this is the default mode
          example: false
        description:
          type: string
          description: Mode description
          example: "Epic summer tournament with special rewards"
        start_date:
          type: string
          format: date-time
          description: Mode start date (for timed modes)
          example: "2024-06-01T00:00:00Z"
        end_date:
          type: string
          format: date-time
          description: Mode end date (for timed modes)
          example: "2024-08-31T23:59:59Z"
        created_at:
          type: string
          format: date-time
          example: "2024-05-01T10:00:00Z"
        updated_at:
          type: string
          format: date-time
          example: "2024-05-01T10:00:00Z"

    Challenge:
      type: object
      properties:
        challenge_id:
          type: string
          description: Unique challenge identifier
          example: "challenge_abc123"
        challenge_type:
          type: string
          enum: [1v1, NvN, cross_game]
          description: Type of challenge
          example: "1v1"
        creator_id:
          type: string
          description: User ID who created the challenge
          example: "user123"
        game_id:
          type: string
          description: Primary game for the challenge
          example: "tetris"
        game_ids:
          type: array
          items:
            type: string
          description: Multiple games for cross-game challenges
          example: ["tetris", "snake"]
        participants:
          type: array
          items:
            type: string
          description: List of participant user IDs
          example: ["user123", "user456"]
        max_participants:
          type: integer
          description: Maximum number of participants (for NvN)
          example: 4
        difficulty:
          type: string
          enum: [easy, medium, hard]
          description: Challenge difficulty
          example: "medium"
        status:
          type: string
          enum: [pending, active, completed, cancelled]
          description: Current challenge status
          example: "pending"
        results:
          type: object
          description: Final challenge results
          additionalProperties:
            type: object
            properties:
              score:
                type: number
                example: 1250.5
              position:
                type: integer
                example: 1
              completion_time:
                type: number
                example: 300.5
        winner_id:
          type: string
          description: ID of the challenge winner
          example: "user123"
        created_at:
          type: string
          format: date-time
          example: "2024-01-15T10:00:00Z"
        started_at:
          type: string
          format: date-time
          example: "2024-01-15T10:05:00Z"
        completed_at:
          type: string
          format: date-time
          example: "2024-01-15T10:35:00Z"
        cancelled_by:
          type: string
          description: User ID who cancelled the challenge
          example: "user123"

    Create1v1ChallengeRequest:
      type: object
      properties:
        challenge_type:
          type: string
          enum: [1v1]
          example: "1v1"
        opponent_id:
          type: string
          description: Specific opponent user ID (or null for auto-match)
          example: "user456"
        game_id:
          type: string
          description: Game to play
          example: "tetris"
        difficulty:
          type: string
          enum: [easy, medium, hard]
          example: "medium"
        description:
          type: string
          description: Optional challenge description
          example: "Let's see who's the best at Tetris!"
      required:
        - challenge_type
        - game_id
        - difficulty

    CreateNvNChallengeRequest:
      type: object
      properties:
        challenge_type:
          type: string
          enum: [NvN]
          example: "NvN"
        participant_ids:
          type: array
          items:
            type: string
          description: Initial participants (including creator)
          example: ["user123", "user456", "user789"]
        game_id:
          type: string
          description: Game to play
          example: "snake"
        max_participants:
          type: integer
          minimum: 2
          maximum: 10
          description: Maximum number of participants
          example: 4
        difficulty:
          type: string
          enum: [easy, medium, hard]
          example: "medium"
        description:
          type: string
          description: Optional challenge description
          example: "4-player Snake battle royale!"
      required:
        - challenge_type
        - participant_ids
        - game_id
        - max_participants
        - difficulty

    CreateCrossGameChallengeRequest:
      type: object
      properties:
        challenge_type:
          type: string
          enum: [cross_game]
          example: "cross_game"
        participant_ids:
          type: array
          items:
            type: string
          description: Participants for cross-game challenge
          example: ["user123", "user456"]
        game_ids:
          type: array
          items:
            type: string
          description: Games to be played in sequence
          example: ["tetris", "snake", "puzzle"]
        description:
          type: string
          description: Optional challenge description
          example: "Multi-game championship!"
      required:
        - challenge_type
        - participant_ids
        - game_ids

    GlobalTeam:
      type: object
      properties:
        team_id:
          type: string
          description: Unique team identifier
          example: "fire_dragons"
        name:
          type: string
          description: Team display name
          example: "Fire Dragons"
        description:
          type: string
          description: Team description
          example: "Fierce competitors with burning passion"
        color:
          type: string
          description: Team color (hex)
          example: "#FF4500"
        emoji:
          type: string
          description: Team emoji
          example: ""
        total_score:
          type: number
          description: Team's total accumulated score
          example: 25450.5
        member_count:
          type: integer
          description: Number of team members
          example: 125
        member_ids:
          type: array
          items:
            type: string
          description: List of team member user IDs
          example: ["user123", "user456", "user789"]
        score_history:
          type: array
          items:
            type: object
            properties:
              user_id:
                type: string
                example: "user123"
              points:
                type: number
                example: 150.5
              timestamp:
                type: string
                format: date-time
                example: "2024-01-15T10:30:00Z"
              source:
                type: string
                example: "game_session"
        is_active:
          type: boolean
          description: Whether the team is currently active
          example: true
        created_at:
          type: string
          format: date-time
          example: "2024-01-01T00:00:00Z"
        updated_at:
          type: string
          format: date-time
          example: "2024-01-15T10:30:00Z"

    TeamMember:
      type: object
      properties:
        user_id:
          type: string
          description: User ID
          example: "user123"
        username:
          type: string
          description: Username
          example: "player1"
        contribution_score:
          type: number
          description: User's contribution to team score
          example: 1250.5
        games_played:
          type: integer
          description: Number of games played for the team
          example: 25
        joined_at:
          type: string
          format: date-time
          description: When the user joined the team
          example: "2024-01-01T12:00:00Z"
        rank:
          type: integer
          description: Rank within the team
          example: 5

    Tournament:
      type: object
      properties:
        tournament_id:
          type: string
          description: Unique tournament identifier
          example: "tournament_summer_2024"
        tournament_type:
          type: string
          enum: [seasonal_war, monthly_battle, special_event]
          description: Type of tournament
          example: "seasonal_war"
        name:
          type: string
          description: Tournament name
          example: "Summer War 2024"
        description:
          type: string
          description: Tournament description
          example: "Epic summer tournament with exclusive rewards"
        status:
          type: string
          enum: [created, active, completed, cancelled]
          description: Tournament status
          example: "active"
        participating_teams:
          type: array
          items:
            type: string
          description: List of participating team IDs
          example: ["fire_dragons", "ice_phoenix", "earth_guardians", "storm_eagles"]
        duration_days:
          type: integer
          description: Tournament duration in days
          example: 30
        start_date:
          type: string
          format: date-time
          description: Tournament start date
          example: "2024-06-01T00:00:00Z"
        end_date:
          type: string
          format: date-time
          description: Tournament end date
          example: "2024-06-30T23:59:59Z"
        final_results:
          type: array
          items:
            type: object
            properties:
              team_id:
                type: string
                example: "fire_dragons"
              position:
                type: integer
                example: 1
              final_score:
                type: number
                example: 50000.5
          description: Final tournament results
        winner_team_id:
          type: string
          description: ID of the winning team
          example: "fire_dragons"
        created_by:
          type: string
          description: Admin user who created the tournament
          example: "admin123"
        created_at:
          type: string
          format: date-time
          example: "2024-05-01T00:00:00Z"
        started_at:
          type: string
          format: date-time
          example: "2024-06-01T00:00:00Z"
        completed_at:
          type: string
          format: date-time
          example: "2024-06-30T23:59:59Z"
        cancelled_by:
          type: string
          description: Admin user who cancelled the tournament
          example: "admin123"